apiVersion: v1
data:
  alertmanager.json: |
    {
       "annotations": {
          "list": [ ]
       },
       "editable": true,
       "gnetId": null,
       "graphTooltip": 0,
       "hideControls": false,
       "links": [
          {
             "asDropdown": true,
             "icon": "external link",
             "includeVars": true,
             "keepTime": true,
             "tags": [
                "cortex"
             ],
             "targetBlank": false,
             "title": "Cortex Dashboards",
             "type": "dashboards"
          }
       ],
       "refresh": "10s",
       "rows": [
          {
             "collapse": false,
             "height": "100px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "format": "short",
                   "id": 1,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(cortex_alertmanager_alerts{cluster=~\"$cluster\", job=~\"($namespace)/alertmanager\"})",
                         "format": "time_series",
                         "instant": true,
                         "intervalFactor": 2,
                         "refId": "A"
                      }
                   ],
                   "thresholds": "70,80",
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Total Alerts",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "singlestat",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "format": "short",
                   "id": 2,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(cortex_alertmanager_silences{cluster=~\"$cluster\", job=~\"($namespace)/alertmanager\"})",
                         "format": "time_series",
                         "instant": true,
                         "intervalFactor": 2,
                         "refId": "A"
                      }
                   ],
                   "thresholds": "70,80",
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Total Silences",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "singlestat",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": false,
             "title": "Headlines",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 3,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 12,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_alertmanager_alerts_received_total{cluster=~\"$cluster\", job=~\"($namespace)/alertmanager\"}[$__rate_interval]))\n-\nsum(rate(cortex_alertmanager_alerts_invalid_total{cluster=~\"$cluster\", job=~\"($namespace)/alertmanager\"}[$__rate_interval]))\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "success",
                         "legendLink": null,
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_alertmanager_alerts_invalid_total{cluster=~\"$cluster\", job=~\"($namespace)/alertmanager\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "failed",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "APS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Alerts Received",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 4,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_alertmanager_notifications_total{cluster=~\"$cluster\", job=~\"($namespace)/alertmanager\"}[$__rate_interval]))\n-\nsum(rate(cortex_alertmanager_notifications_failed_total{cluster=~\"$cluster\", job=~\"($namespace)/alertmanager\"}[$__rate_interval]))\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "success",
                         "legendLink": null,
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_alertmanager_notifications_failed_total{cluster=~\"$cluster\", job=~\"($namespace)/alertmanager\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "failed",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "NPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 5,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "(\nsum(rate(cortex_alertmanager_notifications_total{cluster=~\"$cluster\", job=~\"($namespace)/alertmanager\"}[$__rate_interval])) by(integration)\n-\nsum(rate(cortex_alertmanager_notifications_failed_total{cluster=~\"$cluster\", job=~\"($namespace)/alertmanager\"}[$__rate_interval])) by(integration)\n) > 0\nor on () vector(0)\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "success - {{ integration }}",
                         "legendLink": null,
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_alertmanager_notifications_failed_total{cluster=~\"$cluster\", job=~\"($namespace)/alertmanager\"}[$__rate_interval])) by(integration)",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "failed - {{ integration }}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "NPS by integration",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 6,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(cortex_alertmanager_notification_latency_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/alertmanager\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(cortex_alertmanager_notification_latency_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/alertmanager\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_alertmanager_notification_latency_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/alertmanager\"}[$__rate_interval])) * 1e3 / sum(rate(cortex_alertmanager_notification_latency_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/alertmanager\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Alert Notifications",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": {
                      "1xx": "#EAB839",
                      "2xx": "#7EB26D",
                      "3xx": "#6ED0E0",
                      "4xx": "#EF843C",
                      "5xx": "#E24D42",
                      "error": "#E24D42",
                      "success": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 7,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by (status) (\n  label_replace(label_replace(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_v1_alerts|alertmanager\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-z]+)\"))\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{status}}",
                         "refId": "A",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 8,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_v1_alerts|alertmanager\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_v1_alerts|alertmanager\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "1e3 * sum(cluster_job_route:cortex_request_duration_seconds_sum:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_v1_alerts|alertmanager\"}) / sum(cluster_job_route:cortex_request_duration_seconds_count:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_v1_alerts|alertmanager\"})",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Configuration API (gateway) + Alertmanager UI",
             "titleSize": "h6"
          }
       ],
       "schemaVersion": 14,
       "style": "dark",
       "tags": [
          "cortex"
       ],
       "templating": {
          "list": [
             {
                "current": {
                   "text": "default",
                   "value": "default"
                },
                "hide": 0,
                "label": null,
                "name": "datasource",
                "options": [ ],
                "query": "prometheus",
                "refresh": 1,
                "regex": "",
                "type": "datasource"
             },
             {
                "allValue": ".+",
                "current": {
                   "selected": true,
                   "text": "All",
                   "value": "$__all"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": true,
                "label": "cluster",
                "multi": true,
                "name": "cluster",
                "options": [ ],
                "query": "label_values(cortex_build_info, cluster)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             },
             {
                "allValue": ".+",
                "current": {
                   "selected": true,
                   "text": "All",
                   "value": "$__all"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": true,
                "label": "namespace",
                "multi": true,
                "name": "namespace",
                "options": [ ],
                "query": "label_values(cortex_build_info{cluster=~\"$cluster\"}, namespace)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             }
          ]
       },
       "time": {
          "from": "now-1h",
          "to": "now"
       },
       "timepicker": {
          "refresh_intervals": [
             "5s",
             "10s",
             "30s",
             "1m",
             "5m",
             "15m",
             "30m",
             "1h",
             "2h",
             "1d"
          ],
          "time_options": [
             "5m",
             "15m",
             "1h",
             "6h",
             "12h",
             "24h",
             "2d",
             "7d",
             "30d"
          ]
       },
       "timezone": "utc",
       "title": "Cortex / Alertmanager",
       "uid": "a76bee5913c97c918d9e56a3cc88cc28",
       "version": 0
    }
kind: ConfigMap
metadata:
  labels:
    grafana_dashboard: "1"
  name: alertmanager.json
  namespace: cortex-monitoring-system
---
apiVersion: v1
data:
  cortex-compactor-resources.json: |
    {
       "annotations": {
          "list": [ ]
       },
       "editable": true,
       "gnetId": null,
       "graphTooltip": 0,
       "hideControls": false,
       "links": [
          {
             "asDropdown": true,
             "icon": "external link",
             "includeVars": true,
             "keepTime": true,
             "tags": [
                "cortex"
             ],
             "targetBlank": false,
             "title": "Cortex Dashboards",
             "type": "dashboards"
          }
       ],
       "refresh": "10s",
       "rows": [
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 1,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [
                      {
                         "alias": "limit",
                         "color": "#E02F44",
                         "fill": 0
                      }
                   ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(pod) (rate(container_cpu_usage_seconds_total{cluster=~\"$cluster\", namespace=~\"$namespace\",container=\"compactor\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{pod}}",
                         "legendLink": null,
                         "step": 10
                      },
                      {
                         "expr": "min(container_spec_cpu_quota{cluster=~\"$cluster\", namespace=~\"$namespace\",container=\"compactor\"} / container_spec_cpu_period{cluster=~\"$cluster\", namespace=~\"$namespace\",container=\"compactor\"})",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "limit",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "CPU",
                   "tooltip": {
                      "sort": 2
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 2,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [
                      {
                         "alias": "limit",
                         "color": "#E02F44",
                         "fill": 0
                      }
                   ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "max by(pod) (container_memory_working_set_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\",container=\"compactor\"})",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{pod}}",
                         "legendLink": null,
                         "step": 10
                      },
                      {
                         "expr": "min(container_spec_memory_limit_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\",container=\"compactor\"} > 0)",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "limit",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Memory (workingset)",
                   "tooltip": {
                      "sort": 2
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "bytes",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 3,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(pod) (go_memstats_heap_inuse_bytes{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"})",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{pod}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Memory (go heap inuse)",
                   "tooltip": {
                      "sort": 2
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "bytes",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "CPU and Memory",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 4,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(pod) (rate(container_network_receive_bytes_total{cluster=~\"$cluster\", namespace=~\"$namespace\",pod=~\"compactor.*\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{pod}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Receive Bandwidth",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "Bps",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 5,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(pod) (rate(container_network_transmit_bytes_total{cluster=~\"$cluster\", namespace=~\"$namespace\",pod=~\"compactor.*\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{pod}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Transmit Bandwidth",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "Bps",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Network",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 6,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(instance, pod, device) (rate(node_disk_written_bytes_total[$__rate_interval])) + ignoring(pod) group_right() (label_replace(count by(instance, pod, device) (container_fs_writes_bytes_total{cluster=~\"$cluster\", namespace=~\"$namespace\",container=\"compactor\",device!~\".*sda.*\"}), \"device\", \"$1\", \"device\", \"/dev/(.*)\") * 0)\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{pod}} - {{device}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Disk Writes",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "Bps",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 7,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(instance, pod, device) (rate(node_disk_read_bytes_total[$__rate_interval])) + ignoring(pod) group_right() (label_replace(count by(instance, pod, device) (container_fs_writes_bytes_total{cluster=~\"$cluster\", namespace=~\"$namespace\",container=\"compactor\",device!~\".*sda.*\"}), \"device\", \"$1\", \"device\", \"/dev/(.*)\") * 0)\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{pod}} - {{device}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Disk Reads",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "Bps",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 8,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "max by(persistentvolumeclaim) (kubelet_volume_stats_used_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\"} / kubelet_volume_stats_capacity_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\"}) and count by(persistentvolumeclaim) (kube_persistentvolumeclaim_labels{cluster=~\"$cluster\", namespace=~\"$namespace\",label_name=\"compactor\"})",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{persistentvolumeclaim}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Disk Space Utilization",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "percentunit",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Disk",
             "titleSize": "h6"
          }
       ],
       "schemaVersion": 14,
       "style": "dark",
       "tags": [
          "cortex"
       ],
       "templating": {
          "list": [
             {
                "current": {
                   "text": "default",
                   "value": "default"
                },
                "hide": 0,
                "label": null,
                "name": "datasource",
                "options": [ ],
                "query": "prometheus",
                "refresh": 1,
                "regex": "",
                "type": "datasource"
             },
             {
                "allValue": ".+",
                "current": {
                   "selected": true,
                   "text": "All",
                   "value": "$__all"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": false,
                "label": "cluster",
                "multi": true,
                "name": "cluster",
                "options": [ ],
                "query": "label_values(cortex_build_info, cluster)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             },
             {
                "allValue": ".+",
                "current": {
                   "selected": true,
                   "text": "All",
                   "value": "$__all"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": false,
                "label": "namespace",
                "multi": true,
                "name": "namespace",
                "options": [ ],
                "query": "label_values(cortex_build_info{cluster=~\"$cluster\"}, namespace)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             }
          ]
       },
       "time": {
          "from": "now-1h",
          "to": "now"
       },
       "timepicker": {
          "refresh_intervals": [
             "5s",
             "10s",
             "30s",
             "1m",
             "5m",
             "15m",
             "30m",
             "1h",
             "2h",
             "1d"
          ],
          "time_options": [
             "5m",
             "15m",
             "1h",
             "6h",
             "12h",
             "24h",
             "2d",
             "7d",
             "30d"
          ]
       },
       "timezone": "utc",
       "title": "Cortex / Compactor Resources",
       "uid": "df9added6f1f4332f95848cca48ebd99",
       "version": 0
    }
kind: ConfigMap
metadata:
  labels:
    grafana_dashboard: "1"
  name: cortex-compactor-resources.json
  namespace: cortex-monitoring-system
---
apiVersion: v1
data:
  cortex-compactor.json: |
    {
       "annotations": {
          "list": [ ]
       },
       "editable": true,
       "gnetId": null,
       "graphTooltip": 0,
       "hideControls": false,
       "links": [
          {
             "asDropdown": true,
             "icon": "external link",
             "includeVars": true,
             "keepTime": true,
             "tags": [
                "cortex"
             ],
             "targetBlank": false,
             "title": "Cortex Dashboards",
             "type": "dashboards"
          }
       ],
       "refresh": "10s",
       "rows": [
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "content": "- **Per-instance runs**: number of times a compactor instance triggers a compaction across all tenants its shard manage.\n- **Tenants compaction progress**: in a multi-tenant cluster it shows the progress of tenants compacted while compaction is running. Reset to 0 once the compaction run is completed for all tenants in the shard.\n",
                   "datasource": null,
                   "description": "",
                   "id": 1,
                   "mode": "markdown",
                   "span": 4,
                   "title": "",
                   "transparent": true,
                   "type": "text"
                },
                {
                   "aliasColors": {
                      "completed": "#7EB26D",
                      "failed": "#E24D42",
                      "started": "#34CCEB"
                   },
                   "bars": true,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 2,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": false,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_compactor_runs_started_total{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "started",
                         "legendLink": null,
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_compactor_runs_completed_total{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "completed",
                         "legendLink": null,
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_compactor_runs_failed_total{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "failed",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Per-instance runs / sec",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ops",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 3,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "(\n  cortex_compactor_tenants_processing_succeeded{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"} +\n  cortex_compactor_tenants_processing_failed{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"} +\n  cortex_compactor_tenants_skipped{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}\n) / cortex_compactor_tenants_discovered{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{pod}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Tenants compaction progress",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "percentunit",
                         "label": null,
                         "logBase": 1,
                         "max": 1,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Summary",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "content": "- **Compacted blocks**: number of blocks generated as a result of a compaction operation.\n- **Per-block compaction duration**: time taken to generate a single compacted block.\n",
                   "datasource": null,
                   "description": "",
                   "id": 4,
                   "mode": "markdown",
                   "span": 4,
                   "title": "",
                   "transparent": true,
                   "type": "text"
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 5,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(prometheus_tsdb_compactions_total{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "blocks",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Compacted blocks / sec",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ops",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 6,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(prometheus_tsdb_compaction_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(prometheus_tsdb_compaction_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(prometheus_tsdb_compaction_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}[$__rate_interval])) * 1e3 / sum(rate(prometheus_tsdb_compaction_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Per-block compaction duration",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "content": "- **Average blocks / tenant**: the average number of blocks per tenant.\n- **Tenants with largest number of blocks**: the 10 tenants with the largest number of blocks.\n",
                   "datasource": null,
                   "description": "",
                   "id": 7,
                   "mode": "markdown",
                   "span": 4,
                   "title": "",
                   "transparent": true,
                   "type": "text"
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 8,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "avg(max by(user) (cortex_bucket_blocks_count{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "avg",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Average blocks / tenant",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 9,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "topk(10, max by(user) (cortex_bucket_blocks_count{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{user}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Tenants with largest number of blocks",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 10,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_compactor_blocks_marked_for_deletion_total{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "blocks",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Blocks marked for deletion / sec",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ops",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": {
                      "failed": "#E24D42",
                      "successful": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 11,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_compactor_blocks_cleaned_total{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "successful",
                         "legendLink": null,
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_compactor_block_cleanup_failures_total{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "failed",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Blocks deletions / sec",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ops",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Garbage Collector",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": {
                      "failed": "#E24D42",
                      "successful": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 12,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_compactor_meta_syncs_total{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}[$__rate_interval])) - sum(rate(cortex_compactor_meta_sync_failures_total{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "successful",
                         "legendLink": null,
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_compactor_meta_sync_failures_total{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "failed",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Metadata Syncs / sec",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ops",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 13,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(cortex_compactor_meta_sync_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(cortex_compactor_meta_sync_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_compactor_meta_sync_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}[$__rate_interval])) * 1e3 / sum(rate(cortex_compactor_meta_sync_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/compactor.*\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Metadata Sync Duration",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Metadata Sync",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 14,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(operation) (rate(thanos_objstore_bucket_operations_total{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{operation}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Operations / sec",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "rps",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 15,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(operation) (rate(thanos_objstore_bucket_operation_failures_total{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\"}[$__rate_interval])) / sum by(operation) (rate(thanos_objstore_bucket_operations_total{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{operation}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Error rate",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "percentunit",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 16,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"attributes\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"attributes\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"attributes\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"attributes\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: Attributes",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 17,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"exists\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"exists\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"exists\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"exists\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: Exists",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Object Store",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 18,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"get\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"get\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"get\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"get\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: Get",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 19,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"get_range\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"get_range\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"get_range\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"get_range\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: GetRange",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 20,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"upload\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"upload\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"upload\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"upload\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: Upload",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 21,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"delete\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"delete\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"delete\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"compactor\",operation=\"delete\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: Delete",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "",
             "titleSize": "h6"
          }
       ],
       "schemaVersion": 14,
       "style": "dark",
       "tags": [
          "cortex"
       ],
       "templating": {
          "list": [
             {
                "current": {
                   "text": "default",
                   "value": "default"
                },
                "hide": 0,
                "label": null,
                "name": "datasource",
                "options": [ ],
                "query": "prometheus",
                "refresh": 1,
                "regex": "",
                "type": "datasource"
             },
             {
                "allValue": ".+",
                "current": {
                   "selected": true,
                   "text": "All",
                   "value": "$__all"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": true,
                "label": "cluster",
                "multi": true,
                "name": "cluster",
                "options": [ ],
                "query": "label_values(cortex_build_info, cluster)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             },
             {
                "allValue": ".+",
                "current": {
                   "selected": true,
                   "text": "All",
                   "value": "$__all"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": true,
                "label": "namespace",
                "multi": true,
                "name": "namespace",
                "options": [ ],
                "query": "label_values(cortex_build_info{cluster=~\"$cluster\"}, namespace)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             }
          ]
       },
       "time": {
          "from": "now-1h",
          "to": "now"
       },
       "timepicker": {
          "refresh_intervals": [
             "5s",
             "10s",
             "30s",
             "1m",
             "5m",
             "15m",
             "30m",
             "1h",
             "2h",
             "1d"
          ],
          "time_options": [
             "5m",
             "15m",
             "1h",
             "6h",
             "12h",
             "24h",
             "2d",
             "7d",
             "30d"
          ]
       },
       "timezone": "utc",
       "title": "Cortex / Compactor",
       "uid": "9c408e1d55681ecb8a22c9fab46875cc",
       "version": 0
    }
kind: ConfigMap
metadata:
  labels:
    grafana_dashboard: "1"
  name: cortex-compactor.json
  namespace: cortex-monitoring-system
---
apiVersion: v1
data:
  cortex-config.json: |
    {
       "annotations": {
          "list": [ ]
       },
       "editable": true,
       "gnetId": null,
       "graphTooltip": 0,
       "hideControls": false,
       "links": [
          {
             "asDropdown": true,
             "icon": "external link",
             "includeVars": true,
             "keepTime": true,
             "tags": [
                "cortex"
             ],
             "targetBlank": false,
             "title": "Cortex Dashboards",
             "type": "dashboards"
          }
       ],
       "refresh": "10s",
       "rows": [
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 1,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 12,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "count(cortex_config_hash{cluster=~\"$cluster\", namespace=~\"$namespace\"}) by (sha256)",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "sha256:{{sha256}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Startup config file hashes",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "instances",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Startup config file",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 2,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 12,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "count(cortex_runtime_config_hash{cluster=~\"$cluster\", namespace=~\"$namespace\"}) by (sha256)",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "sha256:{{sha256}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Runtime config file hashes",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "instances",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Runtime config file",
             "titleSize": "h6"
          }
       ],
       "schemaVersion": 14,
       "style": "dark",
       "tags": [
          "cortex"
       ],
       "templating": {
          "list": [
             {
                "current": {
                   "text": "default",
                   "value": "default"
                },
                "hide": 0,
                "label": null,
                "name": "datasource",
                "options": [ ],
                "query": "prometheus",
                "refresh": 1,
                "regex": "",
                "type": "datasource"
             },
             {
                "allValue": ".+",
                "current": {
                   "selected": true,
                   "text": "All",
                   "value": "$__all"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": true,
                "label": "cluster",
                "multi": true,
                "name": "cluster",
                "options": [ ],
                "query": "label_values(cortex_build_info, cluster)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             },
             {
                "allValue": ".+",
                "current": {
                   "selected": true,
                   "text": "All",
                   "value": "$__all"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": true,
                "label": "namespace",
                "multi": true,
                "name": "namespace",
                "options": [ ],
                "query": "label_values(cortex_build_info{cluster=~\"$cluster\"}, namespace)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             }
          ]
       },
       "time": {
          "from": "now-1h",
          "to": "now"
       },
       "timepicker": {
          "refresh_intervals": [
             "5s",
             "10s",
             "30s",
             "1m",
             "5m",
             "15m",
             "30m",
             "1h",
             "2h",
             "1d"
          ],
          "time_options": [
             "5m",
             "15m",
             "1h",
             "6h",
             "12h",
             "24h",
             "2d",
             "7d",
             "30d"
          ]
       },
       "timezone": "utc",
       "title": "Cortex / Config",
       "uid": "61bb048ced9817b2d3e07677fb1c6290",
       "version": 0
    }
kind: ConfigMap
metadata:
  labels:
    grafana_dashboard: "1"
  name: cortex-config.json
  namespace: cortex-monitoring-system
---
apiVersion: v1
data:
  cortex-object-store.json: |
    {
       "annotations": {
          "list": [ ]
       },
       "editable": true,
       "gnetId": null,
       "graphTooltip": 0,
       "hideControls": false,
       "links": [
          {
             "asDropdown": true,
             "icon": "external link",
             "includeVars": true,
             "keepTime": true,
             "tags": [
                "cortex"
             ],
             "targetBlank": false,
             "title": "Cortex Dashboards",
             "type": "dashboards"
          }
       ],
       "refresh": "10s",
       "rows": [
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 1,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(component) (rate(thanos_objstore_bucket_operations_total{cluster=~\"$cluster\", namespace=~\"$namespace\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{component}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "RPS / component",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "rps",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 2,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(component) (rate(thanos_objstore_bucket_operation_failures_total{cluster=~\"$cluster\", namespace=~\"$namespace\"}[$__rate_interval])) / sum by(component) (rate(thanos_objstore_bucket_operations_total{cluster=~\"$cluster\", namespace=~\"$namespace\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{component}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Error rate / component",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "percentunit",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Components",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 3,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(operation) (rate(thanos_objstore_bucket_operations_total{cluster=~\"$cluster\", namespace=~\"$namespace\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{operation}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "RPS / operation",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "rps",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 4,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(operation) (rate(thanos_objstore_bucket_operation_failures_total{cluster=~\"$cluster\", namespace=~\"$namespace\"}[$__rate_interval])) / sum by(operation) (rate(thanos_objstore_bucket_operations_total{cluster=~\"$cluster\", namespace=~\"$namespace\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{operation}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Error rate / operation",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "percentunit",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Operations",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 5,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"get\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"get\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"get\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"get\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: Get",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 6,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"get_range\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"get_range\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"get_range\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"get_range\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: GetRange",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 7,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"exists\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"exists\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"exists\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"exists\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: Exists",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 8,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"attributes\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"attributes\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"attributes\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"attributes\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: Attributes",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 9,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"upload\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"upload\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"upload\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"upload\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: Upload",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 10,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"delete\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"delete\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"delete\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",operation=\"delete\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: Delete",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "",
             "titleSize": "h6"
          }
       ],
       "schemaVersion": 14,
       "style": "dark",
       "tags": [
          "cortex"
       ],
       "templating": {
          "list": [
             {
                "current": {
                   "text": "default",
                   "value": "default"
                },
                "hide": 0,
                "label": null,
                "name": "datasource",
                "options": [ ],
                "query": "prometheus",
                "refresh": 1,
                "regex": "",
                "type": "datasource"
             },
             {
                "allValue": ".+",
                "current": {
                   "selected": true,
                   "text": "All",
                   "value": "$__all"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": true,
                "label": "cluster",
                "multi": true,
                "name": "cluster",
                "options": [ ],
                "query": "label_values(cortex_build_info, cluster)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             },
             {
                "allValue": ".+",
                "current": {
                   "selected": true,
                   "text": "All",
                   "value": "$__all"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": true,
                "label": "namespace",
                "multi": true,
                "name": "namespace",
                "options": [ ],
                "query": "label_values(cortex_build_info{cluster=~\"$cluster\"}, namespace)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             }
          ]
       },
       "time": {
          "from": "now-1h",
          "to": "now"
       },
       "timepicker": {
          "refresh_intervals": [
             "5s",
             "10s",
             "30s",
             "1m",
             "5m",
             "15m",
             "30m",
             "1h",
             "2h",
             "1d"
          ],
          "time_options": [
             "5m",
             "15m",
             "1h",
             "6h",
             "12h",
             "24h",
             "2d",
             "7d",
             "30d"
          ]
       },
       "timezone": "utc",
       "title": "Cortex / Object Store",
       "uid": "d5a3a4489d57c733b5677fb55370a723",
       "version": 0
    }
kind: ConfigMap
metadata:
  labels:
    grafana_dashboard: "1"
  name: cortex-object-store.json
  namespace: cortex-monitoring-system
---
apiVersion: v1
data:
  cortex-queries.json: |
    {
       "annotations": {
          "list": [ ]
       },
       "editable": true,
       "gnetId": null,
       "graphTooltip": 0,
       "hideControls": false,
       "links": [
          {
             "asDropdown": true,
             "icon": "external link",
             "includeVars": true,
             "keepTime": true,
             "tags": [
                "cortex"
             ],
             "targetBlank": false,
             "title": "Cortex Dashboards",
             "type": "dashboards"
          }
       ],
       "refresh": "10s",
       "rows": [
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 1,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(cortex_query_frontend_queue_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(cortex_query_frontend_queue_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_query_frontend_queue_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\"}[$__rate_interval])) * 1e3 / sum(rate(cortex_query_frontend_queue_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Queue Duration",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 2,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(cortex_query_frontend_retries_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\"}[$__rate_interval])) by (le)) * 1",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(cortex_query_frontend_retries_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\"}[$__rate_interval])) by (le)) * 1",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_query_frontend_retries_sum{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\"}[$__rate_interval])) * 1 / sum(rate(cortex_query_frontend_retries_count{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Retries",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 3,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "cortex_query_frontend_queue_length{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\"}",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{cluster}} / {{namespace}} / {{pod}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Queue Length",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Query Frontend",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 4,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(cortex_query_scheduler_queue_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/query-scheduler\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(cortex_query_scheduler_queue_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/query-scheduler\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_query_scheduler_queue_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/query-scheduler\"}[$__rate_interval])) * 1e3 / sum(rate(cortex_query_scheduler_queue_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/query-scheduler\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Queue Duration",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 5,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "cortex_query_scheduler_queue_length{cluster=~\"$cluster\", job=~\"($namespace)/query-scheduler\"}",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{cluster}} / {{namespace}} / {{pod}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Queue Length",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Query Scheduler",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 6,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_cache_hits{name=~\"frontend.+\", cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\"}[1m])) / sum(rate(cortex_cache_fetched_keys{name=~\"frontend.+\", cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\"}[1m]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Hit Rate",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Cache Hit %",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "percentunit",
                         "label": null,
                         "logBase": 1,
                         "max": 1,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 7,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_cache_fetched_keys{name=~\"frontend.+\", cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\"}[1m])) - sum(rate(cortex_cache_hits{name=~\"frontend.+\", cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\"}[1m]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Miss Rate",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Cache misses",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Query Frontend - Results Cache",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 8,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_frontend_split_queries_total{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\"}[1m])) / sum(rate(cortex_frontend_query_range_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\", method=\"split_by_interval\"}[1m]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "partition rate",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Intervals per Query",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 9,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_frontend_mapped_asts_total{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\"}[1m])) / sum(rate(cortex_frontend_split_queries_total{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\"}[1m])) * 100",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "shard rate",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Sharded Queries %",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 10,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_frontend_sharded_queries_total{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\"}[1m])) / sum(rate(cortex_frontend_mapped_asts_total{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\"}[1m]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Sharding factor",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Query Frontend - Sharding/Splitting",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 11,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "max by (slice) (prometheus_engine_query_duration_seconds{quantile=\"0.9\",cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"}) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{slice}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Stages",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 12,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_cache_fetched_keys{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\",name=\"chunksmemcache\"}[1m])) - sum(rate(cortex_cache_hits{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\",name=\"chunksmemcache\"}[1m]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Hit rate",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Chunk cache misses",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 13,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_cache_corrupt_chunks_total{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"}[1m]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Corrupt chunks",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Chunk cache corruptions",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Querier",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 14,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by (le) (cluster_job:cortex_ingester_queried_series_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"})) * 1",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum by (le) (cluster_job:cortex_ingester_queried_series_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"})) * 1",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "1 * sum(cluster_job:cortex_ingester_queried_series_sum:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}) / sum(cluster_job:cortex_ingester_queried_series_count:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"})",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Series per Query",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 15,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by (le) (cluster_job:cortex_ingester_queried_chunks_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"})) * 1",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum by (le) (cluster_job:cortex_ingester_queried_chunks_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"})) * 1",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "1 * sum(cluster_job:cortex_ingester_queried_chunks_sum:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}) / sum(cluster_job:cortex_ingester_queried_chunks_count:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"})",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Chunks per Query",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 16,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by (le) (cluster_job:cortex_ingester_queried_samples_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"})) * 1",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum by (le) (cluster_job:cortex_ingester_queried_samples_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"})) * 1",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "1 * sum(cluster_job:cortex_ingester_queried_samples_sum:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}) / sum(cluster_job:cortex_ingester_queried_samples_count:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"})",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Samples per Query",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Ingester",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 17,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(cortex_querier_storegateway_instances_hit_per_query_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"}[$__rate_interval])) by (le)) * 1",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(cortex_querier_storegateway_instances_hit_per_query_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"}[$__rate_interval])) by (le)) * 1",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_querier_storegateway_instances_hit_per_query_sum{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"}[$__rate_interval])) * 1 / sum(rate(cortex_querier_storegateway_instances_hit_per_query_count{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Number of store-gateways hit per Query",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 18,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(cortex_querier_storegateway_refetches_per_query_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"}[$__rate_interval])) by (le)) * 1",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(cortex_querier_storegateway_refetches_per_query_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"}[$__rate_interval])) by (le)) * 1",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_querier_storegateway_refetches_per_query_sum{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"}[$__rate_interval])) * 1 / sum(rate(cortex_querier_storegateway_refetches_per_query_count{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Refetches of missing blocks per Query",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 19,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_querier_blocks_consistency_checks_failed_total{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"}[1m])) / sum(rate(cortex_querier_blocks_consistency_checks_total{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"}[1m]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Failure Rate",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Consistency checks failed",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "percentunit",
                         "label": null,
                         "logBase": 1,
                         "max": 1,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Querier - Blocks storage",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 20,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "max(cortex_bucket_index_loaded{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"})",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Max",
                         "legendLink": null,
                         "step": 10
                      },
                      {
                         "expr": "min(cortex_bucket_index_loaded{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"})",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Min",
                         "legendLink": null,
                         "step": 10
                      },
                      {
                         "expr": "avg(cortex_bucket_index_loaded{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"})",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Bucket indexes loaded (per querier)",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": {
                      "failed": "#E24D42",
                      "successful": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 21,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_bucket_index_loads_total{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"}[$__rate_interval])) - sum(rate(cortex_bucket_index_load_failures_total{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "successful",
                         "legendLink": null,
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_bucket_index_load_failures_total{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "failed",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Bucket indexes load / sec",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 22,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(cortex_bucket_index_load_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(cortex_bucket_index_load_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_bucket_index_load_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"}[$__rate_interval])) * 1e3 / sum(rate(cortex_bucket_index_load_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Bucket indexes load latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 23,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_bucket_store_series_blocks_queried_sum{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "blocks",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Blocks queried / sec",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ops",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 24,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(data_type) (rate(cortex_bucket_store_series_data_fetched_sum{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{data_type}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Data fetched / sec",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ops",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 25,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(data_type) (rate(cortex_bucket_store_series_data_touched_sum{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{data_type}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Data touched / sec",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ops",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Store-gateway - Blocks storage",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 26,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(cortex_bucket_store_series_get_all_duration_seconds_bucket{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(cortex_bucket_store_series_get_all_duration_seconds_bucket{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_bucket_store_series_get_all_duration_seconds_sum{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval])) * 1e3 / sum(rate(cortex_bucket_store_series_get_all_duration_seconds_count{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Series fetch duration (per request)",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 27,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(cortex_bucket_store_series_merge_duration_seconds_bucket{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(cortex_bucket_store_series_merge_duration_seconds_bucket{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_bucket_store_series_merge_duration_seconds_sum{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval])) * 1e3 / sum(rate(cortex_bucket_store_series_merge_duration_seconds_count{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Series merge duration (per request)",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 28,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_bucket_store_series_result_series_sum{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval])) / sum(rate(cortex_bucket_store_series_result_series_count{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "avg series returned",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Series returned (per request)",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 29,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "cortex_bucket_store_blocks_loaded{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{pod}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Blocks currently loaded",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": {
                      "failed": "#E24D42",
                      "successful": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 30,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_bucket_store_block_loads_total{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval])) - sum(rate(cortex_bucket_store_block_load_failures_total{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "successful",
                         "legendLink": null,
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_bucket_store_block_load_failures_total{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "failed",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Blocks loaded / sec",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": {
                      "failed": "#E24D42",
                      "successful": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 31,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_bucket_store_block_drops_total{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval])) - sum(rate(cortex_bucket_store_block_drop_failures_total{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "successful",
                         "legendLink": null,
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_bucket_store_block_drop_failures_total{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "failed",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Blocks dropped / sec",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 32,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "cortex_bucket_store_indexheader_lazy_load_total{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"} - cortex_bucket_store_indexheader_lazy_unload_total{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{pod}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Lazy loaded index-headers",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 33,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(cortex_bucket_store_indexheader_lazy_load_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(cortex_bucket_store_indexheader_lazy_load_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_bucket_store_indexheader_lazy_load_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval])) * 1e3 / sum(rate(cortex_bucket_store_indexheader_lazy_load_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Index-header lazy load duration",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "",
             "titleSize": "h6"
          }
       ],
       "schemaVersion": 14,
       "style": "dark",
       "tags": [
          "cortex"
       ],
       "templating": {
          "list": [
             {
                "current": {
                   "text": "default",
                   "value": "default"
                },
                "hide": 0,
                "label": null,
                "name": "datasource",
                "options": [ ],
                "query": "prometheus",
                "refresh": 1,
                "regex": "",
                "type": "datasource"
             },
             {
                "allValue": ".+",
                "current": {
                   "selected": true,
                   "text": "All",
                   "value": "$__all"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": true,
                "label": "cluster",
                "multi": true,
                "name": "cluster",
                "options": [ ],
                "query": "label_values(cortex_build_info, cluster)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             },
             {
                "allValue": ".+",
                "current": {
                   "selected": true,
                   "text": "All",
                   "value": "$__all"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": true,
                "label": "namespace",
                "multi": true,
                "name": "namespace",
                "options": [ ],
                "query": "label_values(cortex_build_info{cluster=~\"$cluster\"}, namespace)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             }
          ]
       },
       "time": {
          "from": "now-1h",
          "to": "now"
       },
       "timepicker": {
          "refresh_intervals": [
             "5s",
             "10s",
             "30s",
             "1m",
             "5m",
             "15m",
             "30m",
             "1h",
             "2h",
             "1d"
          ],
          "time_options": [
             "5m",
             "15m",
             "1h",
             "6h",
             "12h",
             "24h",
             "2d",
             "7d",
             "30d"
          ]
       },
       "timezone": "utc",
       "title": "Cortex / Queries",
       "uid": "d9931b1054053c8b972d320774bb8f1d",
       "version": 0
    }
kind: ConfigMap
metadata:
  labels:
    grafana_dashboard: "1"
  name: cortex-queries.json
  namespace: cortex-monitoring-system
---
apiVersion: v1
data:
  cortex-reads.json: |
    {
       "annotations": {
          "list": [ ]
       },
       "editable": true,
       "gnetId": null,
       "graphTooltip": 0,
       "hideControls": false,
       "links": [
          {
             "asDropdown": true,
             "icon": "external link",
             "includeVars": true,
             "keepTime": true,
             "tags": [
                "cortex"
             ],
             "targetBlank": false,
             "title": "Cortex Dashboards",
             "type": "dashboards"
          }
       ],
       "refresh": "10s",
       "rows": [
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": {
                      "1xx": "#EAB839",
                      "2xx": "#7EB26D",
                      "3xx": "#6ED0E0",
                      "4xx": "#EF843C",
                      "5xx": "#E24D42",
                      "error": "#E24D42",
                      "success": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 1,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by (status) (\n  label_replace(label_replace(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"(prometheus|api_prom)_api_v1_.+\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-z]+)\"))\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{status}}",
                         "refId": "A",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 2,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"(prometheus|api_prom)_api_v1_.+\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"(prometheus|api_prom)_api_v1_.+\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "1e3 * sum(cluster_job_route:cortex_request_duration_seconds_sum:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"(prometheus|api_prom)_api_v1_.+\"}) / sum(cluster_job_route:cortex_request_duration_seconds_count:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"(prometheus|api_prom)_api_v1_.+\"})",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 0,
                   "id": 3,
                   "legend": {
                      "show": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by(le, pod) (rate(cortex_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"(prometheus|api_prom)_api_v1_.+\"}[$__rate_interval])))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Per pod p99 Latency",
                   "tooltip": {
                      "sort": 2
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "s",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Gateway",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": {
                      "1xx": "#EAB839",
                      "2xx": "#7EB26D",
                      "3xx": "#6ED0E0",
                      "4xx": "#EF843C",
                      "5xx": "#E24D42",
                      "error": "#E24D42",
                      "success": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 4,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by (status) (\n  label_replace(label_replace(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\", route=~\"(prometheus|api_prom)_api_v1_.+\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-z]+)\"))\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{status}}",
                         "refId": "A",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 5,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\", route=~\"(prometheus|api_prom)_api_v1_.+\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\", route=~\"(prometheus|api_prom)_api_v1_.+\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "1e3 * sum(cluster_job_route:cortex_request_duration_seconds_sum:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\", route=~\"(prometheus|api_prom)_api_v1_.+\"}) / sum(cluster_job_route:cortex_request_duration_seconds_count:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\", route=~\"(prometheus|api_prom)_api_v1_.+\"})",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 0,
                   "id": 6,
                   "legend": {
                      "show": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by(le, pod) (rate(cortex_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\", route=~\"(prometheus|api_prom)_api_v1_.+\"}[$__rate_interval])))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Per pod p99 Latency",
                   "tooltip": {
                      "sort": 2
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "s",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Query Frontend",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": {
                      "1xx": "#EAB839",
                      "2xx": "#7EB26D",
                      "3xx": "#6ED0E0",
                      "4xx": "#EF843C",
                      "5xx": "#E24D42",
                      "error": "#E24D42",
                      "success": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 7,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by (status) (\n  label_replace(label_replace(rate(cortex_query_scheduler_queue_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/query-scheduler\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-z]+)\"))\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{status}}",
                         "refId": "A",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 8,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(cortex_query_scheduler_queue_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/query-scheduler\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(cortex_query_scheduler_queue_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/query-scheduler\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_query_scheduler_queue_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/query-scheduler\"}[$__rate_interval])) * 1e3 / sum(rate(cortex_query_scheduler_queue_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/query-scheduler\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency (Time in Queue)",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Query Scheduler",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": {
                      "1xx": "#EAB839",
                      "2xx": "#7EB26D",
                      "3xx": "#6ED0E0",
                      "4xx": "#EF843C",
                      "5xx": "#E24D42",
                      "error": "#E24D42",
                      "success": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 9,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by (status) (\n  label_replace(label_replace(rate(cortex_cache_request_duration_seconds_count{method=~\"frontend.+\", cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-z]+)\"))\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{status}}",
                         "refId": "A",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 10,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by (le) (cluster_job_method:cortex_cache_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\", method=~\"frontend.+\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum by (le) (cluster_job_method:cortex_cache_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\", method=~\"frontend.+\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "1e3 * sum(cluster_job_method:cortex_cache_request_duration_seconds_sum:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\", method=~\"frontend.+\"}) / sum(cluster_job_method:cortex_cache_request_duration_seconds_count:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(query-frontend|cortex$)\", method=~\"frontend.+\"})",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Cache - Query Results",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": {
                      "1xx": "#EAB839",
                      "2xx": "#7EB26D",
                      "3xx": "#6ED0E0",
                      "4xx": "#EF843C",
                      "5xx": "#E24D42",
                      "error": "#E24D42",
                      "success": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 11,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by (status) (\n  label_replace(label_replace(rate(cortex_querier_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\", route=~\"(prometheus|api_prom)_api_v1_.+\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-z]+)\"))\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{status}}",
                         "refId": "A",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 12,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by (le) (cluster_job_route:cortex_querier_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\", route=~\"(prometheus|api_prom)_api_v1_.+\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum by (le) (cluster_job_route:cortex_querier_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\", route=~\"(prometheus|api_prom)_api_v1_.+\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "1e3 * sum(cluster_job_route:cortex_querier_request_duration_seconds_sum:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\", route=~\"(prometheus|api_prom)_api_v1_.+\"}) / sum(cluster_job_route:cortex_querier_request_duration_seconds_count:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\", route=~\"(prometheus|api_prom)_api_v1_.+\"})",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 0,
                   "id": 13,
                   "legend": {
                      "show": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by(le, pod) (rate(cortex_querier_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\", route=~\"(prometheus|api_prom)_api_v1_.+\"}[$__rate_interval])))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Per pod p99 Latency",
                   "tooltip": {
                      "sort": 2
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "s",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Querier",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": {
                      "1xx": "#EAB839",
                      "2xx": "#7EB26D",
                      "3xx": "#6ED0E0",
                      "4xx": "#EF843C",
                      "5xx": "#E24D42",
                      "error": "#E24D42",
                      "success": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 14,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by (status) (\n  label_replace(label_replace(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\",route=~\"/cortex.Ingester/Query(Stream)?|/cortex.Ingester/MetricsForLabelMatchers|/cortex.Ingester/LabelValues|/cortex.Ingester/MetricsMetadata\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-z]+)\"))\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{status}}",
                         "refId": "A",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 15,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\", route=~\"/cortex.Ingester/Query(Stream)?|/cortex.Ingester/MetricsForLabelMatchers|/cortex.Ingester/LabelValues|/cortex.Ingester/MetricsMetadata\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\", route=~\"/cortex.Ingester/Query(Stream)?|/cortex.Ingester/MetricsForLabelMatchers|/cortex.Ingester/LabelValues|/cortex.Ingester/MetricsMetadata\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "1e3 * sum(cluster_job_route:cortex_request_duration_seconds_sum:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\", route=~\"/cortex.Ingester/Query(Stream)?|/cortex.Ingester/MetricsForLabelMatchers|/cortex.Ingester/LabelValues|/cortex.Ingester/MetricsMetadata\"}) / sum(cluster_job_route:cortex_request_duration_seconds_count:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\", route=~\"/cortex.Ingester/Query(Stream)?|/cortex.Ingester/MetricsForLabelMatchers|/cortex.Ingester/LabelValues|/cortex.Ingester/MetricsMetadata\"})",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 0,
                   "id": 16,
                   "legend": {
                      "show": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by(le, pod) (rate(cortex_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\", route=~\"/cortex.Ingester/Query(Stream)?|/cortex.Ingester/MetricsForLabelMatchers|/cortex.Ingester/LabelValues|/cortex.Ingester/MetricsMetadata\"}[$__rate_interval])))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Per pod p99 Latency",
                   "tooltip": {
                      "sort": 2
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "s",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Ingester",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": {
                      "1xx": "#EAB839",
                      "2xx": "#7EB26D",
                      "3xx": "#6ED0E0",
                      "4xx": "#EF843C",
                      "5xx": "#E24D42",
                      "error": "#E24D42",
                      "success": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 17,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by (status) (\n  label_replace(label_replace(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\",route=~\"/gatewaypb.StoreGateway/.*\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-z]+)\"))\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{status}}",
                         "refId": "A",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 18,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\", route=~\"/gatewaypb.StoreGateway/.*\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\", route=~\"/gatewaypb.StoreGateway/.*\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "1e3 * sum(cluster_job_route:cortex_request_duration_seconds_sum:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\", route=~\"/gatewaypb.StoreGateway/.*\"}) / sum(cluster_job_route:cortex_request_duration_seconds_count:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\", route=~\"/gatewaypb.StoreGateway/.*\"})",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 0,
                   "id": 19,
                   "legend": {
                      "show": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by(le, pod) (rate(cortex_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\", route=~\"/gatewaypb.StoreGateway/.*\"}[$__rate_interval])))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Per pod p99 Latency",
                   "tooltip": {
                      "sort": 2
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "s",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Store-gateway",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 20,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(operation) (rate(thanos_memcached_operations_total{component=\"store-gateway\",name=\"index-cache\", cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{operation}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ops",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 21,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_memcached_operation_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\",operation=\"getmulti\",component=\"store-gateway\",name=\"index-cache\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_memcached_operation_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\",operation=\"getmulti\",component=\"store-gateway\",name=\"index-cache\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_memcached_operation_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\",operation=\"getmulti\",component=\"store-gateway\",name=\"index-cache\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_memcached_operation_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\",operation=\"getmulti\",component=\"store-gateway\",name=\"index-cache\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency (getmulti)",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 22,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(item_type) (rate(thanos_store_index_cache_hits_total{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval])) / sum by(item_type) (rate(thanos_store_index_cache_requests_total{component=\"store-gateway\",cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{item_type}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Hit ratio",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "percentunit",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Memcached  Blocks Storage  Block Index (Store-gateway)",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 23,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(operation) (rate(thanos_memcached_operations_total{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\",component=\"store-gateway\",name=\"chunks-cache\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{operation}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ops",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 24,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_memcached_operation_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\",operation=\"getmulti\",component=\"store-gateway\",name=\"chunks-cache\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_memcached_operation_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\",operation=\"getmulti\",component=\"store-gateway\",name=\"chunks-cache\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_memcached_operation_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\",operation=\"getmulti\",component=\"store-gateway\",name=\"chunks-cache\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_memcached_operation_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\",operation=\"getmulti\",component=\"store-gateway\",name=\"chunks-cache\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency (getmulti)",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 25,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(thanos_cache_memcached_hits_total{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\",component=\"store-gateway\",name=\"chunks-cache\"}[$__rate_interval])) / sum(rate(thanos_cache_memcached_requests_total{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\",component=\"store-gateway\",name=\"chunks-cache\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "items",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Hit ratio",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "percentunit",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Memcached  Blocks Storage  Chunks (Store-gateway)",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 26,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(operation) (rate(thanos_memcached_operations_total{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\",component=\"store-gateway\",name=\"metadata-cache\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{operation}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ops",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 27,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_memcached_operation_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\",operation=\"getmulti\",component=\"store-gateway\",name=\"metadata-cache\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_memcached_operation_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\",operation=\"getmulti\",component=\"store-gateway\",name=\"metadata-cache\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_memcached_operation_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\",operation=\"getmulti\",component=\"store-gateway\",name=\"metadata-cache\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_memcached_operation_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\",operation=\"getmulti\",component=\"store-gateway\",name=\"metadata-cache\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency (getmulti)",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 28,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(thanos_cache_memcached_hits_total{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\",component=\"store-gateway\",name=\"metadata-cache\"}[$__rate_interval])) / sum(rate(thanos_cache_memcached_requests_total{cluster=~\"$cluster\", job=~\"($namespace)/(store-gateway|cortex$)\",component=\"store-gateway\",name=\"metadata-cache\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "items",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Hit ratio",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "percentunit",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Memcached  Blocks Storage  Metadata (Store-gateway)",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 29,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(operation) (rate(thanos_memcached_operations_total{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\",component=\"querier\",name=\"metadata-cache\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{operation}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ops",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 30,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_memcached_operation_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\",operation=\"getmulti\",component=\"querier\",name=\"metadata-cache\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_memcached_operation_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\",operation=\"getmulti\",component=\"querier\",name=\"metadata-cache\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_memcached_operation_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\",operation=\"getmulti\",component=\"querier\",name=\"metadata-cache\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_memcached_operation_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\",operation=\"getmulti\",component=\"querier\",name=\"metadata-cache\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency (getmulti)",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 31,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(thanos_cache_memcached_hits_total{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\",component=\"querier\",name=\"metadata-cache\"}[$__rate_interval])) / sum(rate(thanos_cache_memcached_requests_total{cluster=~\"$cluster\", job=~\"($namespace)/(querier|cortex$)\",component=\"querier\",name=\"metadata-cache\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "items",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Hit ratio",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "percentunit",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Memcached  Blocks Storage  Metadata (Querier)",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 32,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(operation) (rate(thanos_objstore_bucket_operations_total{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{operation}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Operations / sec",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "rps",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 33,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(operation) (rate(thanos_objstore_bucket_operation_failures_total{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\"}[$__rate_interval])) / sum by(operation) (rate(thanos_objstore_bucket_operations_total{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{operation}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Error rate",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "percentunit",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 34,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"attributes\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"attributes\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"attributes\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"attributes\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: Attributes",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 35,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"exists\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"exists\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"exists\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"exists\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: Exists",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Store-gateway - Blocks Object Store",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 36,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"get\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"get\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"get\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"get\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: Get",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 37,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"get_range\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"get_range\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"get_range\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"get_range\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: GetRange",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 38,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"upload\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"upload\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"upload\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"upload\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: Upload",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 39,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"delete\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"delete\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"delete\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"store-gateway\",operation=\"delete\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: Delete",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 40,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(operation) (rate(thanos_objstore_bucket_operations_total{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{operation}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Operations / sec",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "rps",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 41,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(operation) (rate(thanos_objstore_bucket_operation_failures_total{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\"}[$__rate_interval])) / sum by(operation) (rate(thanos_objstore_bucket_operations_total{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{operation}}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Error rate",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "percentunit",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 42,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"attributes\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"attributes\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"attributes\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"attributes\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: Attributes",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 43,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"exists\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"exists\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"exists\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"exists\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: Exists",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Querier - Blocks Object Store",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 44,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"get\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"get\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"get\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"get\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: Get",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 45,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"get_range\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"get_range\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"get_range\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"get_range\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: GetRange",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 46,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"upload\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"upload\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"upload\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"upload\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: Upload",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 47,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"delete\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"delete\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"delete\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\",component=\"querier\",operation=\"delete\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Op: Delete",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "",
             "titleSize": "h6"
          }
       ],
       "schemaVersion": 14,
       "style": "dark",
       "tags": [
          "cortex"
       ],
       "templating": {
          "list": [
             {
                "current": {
                   "text": "default",
                   "value": "default"
                },
                "hide": 0,
                "label": null,
                "name": "datasource",
                "options": [ ],
                "query": "prometheus",
                "refresh": 1,
                "regex": "",
                "type": "datasource"
             },
             {
                "allValue": ".+",
                "current": {
                   "selected": true,
                   "text": "All",
                   "value": "$__all"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": true,
                "label": "cluster",
                "multi": true,
                "name": "cluster",
                "options": [ ],
                "query": "label_values(cortex_build_info, cluster)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             },
             {
                "allValue": ".+",
                "current": {
                   "selected": true,
                   "text": "All",
                   "value": "$__all"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": true,
                "label": "namespace",
                "multi": true,
                "name": "namespace",
                "options": [ ],
                "query": "label_values(cortex_build_info{cluster=~\"$cluster\"}, namespace)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             }
          ]
       },
       "time": {
          "from": "now-1h",
          "to": "now"
       },
       "timepicker": {
          "refresh_intervals": [
             "5s",
             "10s",
             "30s",
             "1m",
             "5m",
             "15m",
             "30m",
             "1h",
             "2h",
             "1d"
          ],
          "time_options": [
             "5m",
             "15m",
             "1h",
             "6h",
             "12h",
             "24h",
             "2d",
             "7d",
             "30d"
          ]
       },
       "timezone": "utc",
       "title": "Cortex / Reads",
       "uid": "8d6ba60eccc4b6eedfa329b24b1bd339",
       "version": 0
    }
kind: ConfigMap
metadata:
  labels:
    grafana_dashboard: "1"
  name: cortex-reads.json
  namespace: cortex-monitoring-system
---
apiVersion: v1
data:
  cortex-rollout-progress.json: |
    {
       "annotations": {
          "list": [ ]
       },
       "editable": true,
       "gnetId": null,
       "graphTooltip": 0,
       "hideControls": false,
       "links": [
          {
             "asDropdown": true,
             "icon": "external link",
             "includeVars": true,
             "keepTime": true,
             "tags": [
                "cortex"
             ],
             "targetBlank": false,
             "title": "Cortex Dashboards",
             "type": "dashboards"
          }
       ],
       "panels": [
          {
             "aliasColors": { },
             "bars": false,
             "dashLength": 10,
             "dashes": false,
             "datasource": "$datasource",
             "fieldConfig": {
                "defaults": {
                   "color": {
                      "mode": "thresholds"
                   },
                   "mappings": [ ],
                   "max": 1,
                   "min": 0,
                   "thresholds": {
                      "mode": "absolute",
                      "steps": [
                         {
                            "color": "yellow",
                            "value": null
                         },
                         {
                            "color": "yellow",
                            "value": 0.999
                         },
                         {
                            "color": "green",
                            "value": 1
                         }
                      ]
                   },
                   "unit": "percentunit"
                }
             },
             "fill": 1,
             "gridPos": {
                "h": 8,
                "w": 10,
                "x": 0,
                "y": 0
             },
             "id": 1,
             "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
             },
             "lines": true,
             "linewidth": 1,
             "links": [ ],
             "nullPointMode": "null as zero",
             "options": {
                "displayMode": "basic",
                "orientation": "horizontal",
                "reduceOptions": {
                   "calcs": [
                      "lastNotNull"
                   ],
                   "fields": "",
                   "values": false
                }
             },
             "percentage": false,
             "pointradius": 5,
             "points": false,
             "renderer": "flot",
             "seriesOverrides": [ ],
             "spaceLength": 10,
             "span": 6,
             "stack": false,
             "steppedLine": false,
             "targets": [
                {
                   "expr": "(\n  kube_statefulset_status_replicas_updated{cluster=~\"$cluster\", namespace=~\"$namespace\",statefulset=~\"cortex-gw|distributor|ingester|query-frontend|querier|compactor|store-gateway|ruler|alertmanager\"}\n  /\n  kube_statefulset_replicas{cluster=~\"$cluster\", namespace=~\"$namespace\"}\n) and (\n  kube_statefulset_replicas{cluster=~\"$cluster\", namespace=~\"$namespace\"}\n  > 0\n)\n",
                   "format": null,
                   "intervalFactor": null,
                   "legendFormat": "{{statefulset}}",
                   "legendLink": null,
                   "step": null
                },
                {
                   "expr": "(\n  kube_deployment_status_replicas_updated{cluster=~\"$cluster\", namespace=~\"$namespace\",deployment=~\"cortex-gw|distributor|ingester|query-frontend|querier|compactor|store-gateway|ruler|alertmanager\"}\n  /\n  kube_deployment_spec_replicas{cluster=~\"$cluster\", namespace=~\"$namespace\"}\n) and (\n  kube_deployment_spec_replicas{cluster=~\"$cluster\", namespace=~\"$namespace\"}\n  > 0\n)\n",
                   "format": null,
                   "intervalFactor": null,
                   "legendFormat": "{{deployment}}",
                   "legendLink": null,
                   "step": null
                }
             ],
             "thresholds": [ ],
             "timeFrom": null,
             "timeShift": null,
             "title": "Rollout progress",
             "tooltip": {
                "shared": false,
                "sort": 0,
                "value_type": "individual"
             },
             "type": "bargauge",
             "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": [ ]
             },
             "yaxes": [
                {
                   "format": "short",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": 0,
                   "show": true
                },
                {
                   "format": "short",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": null,
                   "show": false
                }
             ]
          },
          {
             "aliasColors": { },
             "bars": false,
             "dashLength": 10,
             "dashes": false,
             "datasource": "$datasource",
             "fieldConfig": {
                "defaults": {
                   "color": {
                      "mode": "thresholds"
                   },
                   "decimals": 1,
                   "noValue": "",
                   "thresholds": {
                      "mode": "absolute",
                      "steps": [
                         {
                            "color": "green",
                            "value": null
                         }
                      ]
                   },
                   "unit": "percentunit"
                },
                "overrides": [ ]
             },
             "fill": 1,
             "gridPos": {
                "h": 4,
                "w": 2,
                "x": 10,
                "y": 0
             },
             "id": 2,
             "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
             },
             "lines": true,
             "linewidth": 1,
             "links": [ ],
             "nullPointMode": "null as zero",
             "percentage": false,
             "pointradius": 5,
             "points": false,
             "renderer": "flot",
             "seriesOverrides": [ ],
             "spaceLength": 10,
             "span": 6,
             "stack": false,
             "steppedLine": false,
             "targets": [
                {
                   "expr": "sum(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_(v1|prom)_push\",status_code=~\"2.+\"}[$__rate_interval])) /\nsum(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_(v1|prom)_push\"}[$__rate_interval]))\n",
                   "format": null,
                   "instant": false,
                   "interval": "",
                   "intervalFactor": null,
                   "legendFormat": "",
                   "legendLink": null,
                   "step": null
                }
             ],
             "thresholds": [ ],
             "timeFrom": null,
             "timeShift": null,
             "title": "Writes - 2xx",
             "tooltip": {
                "shared": false,
                "sort": 0,
                "value_type": "individual"
             },
             "type": "stat",
             "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": [ ]
             },
             "yaxes": [
                {
                   "format": "short",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": 0,
                   "show": true
                },
                {
                   "format": "short",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": null,
                   "show": false
                }
             ]
          },
          {
             "aliasColors": { },
             "bars": false,
             "dashLength": 10,
             "dashes": false,
             "datasource": "$datasource",
             "fieldConfig": {
                "defaults": {
                   "color": {
                      "mode": "thresholds"
                   },
                   "decimals": 1,
                   "noValue": "",
                   "thresholds": {
                      "mode": "absolute",
                      "steps": [
                         {
                            "color": "green",
                            "value": null
                         },
                         {
                            "color": "orange",
                            "value": 0.20000000000000001
                         },
                         {
                            "color": "red",
                            "value": 0.5
                         }
                      ]
                   },
                   "unit": "percentunit"
                },
                "overrides": [ ]
             },
             "fill": 1,
             "gridPos": {
                "h": 4,
                "w": 2,
                "x": 12,
                "y": 0
             },
             "id": 3,
             "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
             },
             "lines": true,
             "linewidth": 1,
             "links": [ ],
             "nullPointMode": "null as zero",
             "percentage": false,
             "pointradius": 5,
             "points": false,
             "renderer": "flot",
             "seriesOverrides": [ ],
             "spaceLength": 10,
             "span": 6,
             "stack": false,
             "steppedLine": false,
             "targets": [
                {
                   "expr": "sum(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_(v1|prom)_push\",status_code=~\"4.+\"}[$__rate_interval])) /\nsum(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_(v1|prom)_push\"}[$__rate_interval]))\n",
                   "format": null,
                   "instant": false,
                   "interval": "",
                   "intervalFactor": null,
                   "legendFormat": "",
                   "legendLink": null,
                   "step": null
                }
             ],
             "thresholds": [ ],
             "timeFrom": null,
             "timeShift": null,
             "title": "Writes - 4xx",
             "tooltip": {
                "shared": false,
                "sort": 0,
                "value_type": "individual"
             },
             "type": "stat",
             "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": [ ]
             },
             "yaxes": [
                {
                   "format": "short",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": 0,
                   "show": true
                },
                {
                   "format": "short",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": null,
                   "show": false
                }
             ]
          },
          {
             "aliasColors": { },
             "bars": false,
             "dashLength": 10,
             "dashes": false,
             "datasource": "$datasource",
             "fieldConfig": {
                "defaults": {
                   "color": {
                      "mode": "thresholds"
                   },
                   "decimals": 1,
                   "noValue": "",
                   "thresholds": {
                      "mode": "absolute",
                      "steps": [
                         {
                            "color": "green",
                            "value": null
                         },
                         {
                            "color": "red",
                            "value": 0.01
                         }
                      ]
                   },
                   "unit": "percentunit"
                },
                "overrides": [ ]
             },
             "fill": 1,
             "gridPos": {
                "h": 4,
                "w": 2,
                "x": 14,
                "y": 0
             },
             "id": 4,
             "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
             },
             "lines": true,
             "linewidth": 1,
             "links": [ ],
             "nullPointMode": "null as zero",
             "percentage": false,
             "pointradius": 5,
             "points": false,
             "renderer": "flot",
             "seriesOverrides": [ ],
             "spaceLength": 10,
             "span": 6,
             "stack": false,
             "steppedLine": false,
             "targets": [
                {
                   "expr": "sum(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_(v1|prom)_push\",status_code=~\"5.+\"}[$__rate_interval])) /\nsum(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_(v1|prom)_push\"}[$__rate_interval]))\n",
                   "format": null,
                   "instant": false,
                   "interval": "",
                   "intervalFactor": null,
                   "legendFormat": "",
                   "legendLink": null,
                   "step": null
                }
             ],
             "thresholds": [ ],
             "timeFrom": null,
             "timeShift": null,
             "title": "Writes - 5xx",
             "tooltip": {
                "shared": false,
                "sort": 0,
                "value_type": "individual"
             },
             "type": "stat",
             "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": [ ]
             },
             "yaxes": [
                {
                   "format": "short",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": 0,
                   "show": true
                },
                {
                   "format": "short",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": null,
                   "show": false
                }
             ]
          },
          {
             "aliasColors": { },
             "bars": false,
             "dashLength": 10,
             "dashes": false,
             "datasource": "$datasource",
             "fieldConfig": {
                "defaults": {
                   "color": {
                      "mode": "thresholds"
                   },
                   "decimals": 1,
                   "noValue": "",
                   "thresholds": {
                      "mode": "absolute",
                      "steps": [
                         {
                            "color": "green",
                            "value": null
                         },
                         {
                            "color": "orange",
                            "value": 0.20000000000000001
                         },
                         {
                            "color": "red",
                            "value": 0.5
                         }
                      ]
                   },
                   "unit": "s"
                },
                "overrides": [ ]
             },
             "fill": 1,
             "gridPos": {
                "h": 4,
                "w": 8,
                "x": 16,
                "y": 0
             },
             "id": 5,
             "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
             },
             "lines": true,
             "linewidth": 1,
             "links": [ ],
             "nullPointMode": "null as zero",
             "percentage": false,
             "pointradius": 5,
             "points": false,
             "renderer": "flot",
             "seriesOverrides": [ ],
             "spaceLength": 10,
             "span": 6,
             "stack": false,
             "steppedLine": false,
             "targets": [
                {
                   "expr": "histogram_quantile(0.99, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_(v1|prom)_push\"}))\n",
                   "format": null,
                   "instant": false,
                   "interval": "",
                   "intervalFactor": null,
                   "legendFormat": "",
                   "legendLink": null,
                   "step": null
                }
             ],
             "thresholds": [ ],
             "timeFrom": null,
             "timeShift": null,
             "title": "Writes 99th Latency",
             "tooltip": {
                "shared": false,
                "sort": 0,
                "value_type": "individual"
             },
             "type": "stat",
             "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": [ ]
             },
             "yaxes": [
                {
                   "format": "short",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": 0,
                   "show": true
                },
                {
                   "format": "short",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": null,
                   "show": false
                }
             ]
          },
          {
             "aliasColors": { },
             "bars": false,
             "dashLength": 10,
             "dashes": false,
             "datasource": "$datasource",
             "fieldConfig": {
                "defaults": {
                   "color": {
                      "mode": "thresholds"
                   },
                   "decimals": 1,
                   "noValue": "",
                   "thresholds": {
                      "mode": "absolute",
                      "steps": [
                         {
                            "color": "green",
                            "value": null
                         }
                      ]
                   },
                   "unit": "percentunit"
                },
                "overrides": [ ]
             },
             "fill": 1,
             "gridPos": {
                "h": 4,
                "w": 2,
                "x": 10,
                "y": 4
             },
             "id": 6,
             "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
             },
             "lines": true,
             "linewidth": 1,
             "links": [ ],
             "nullPointMode": "null as zero",
             "percentage": false,
             "pointradius": 5,
             "points": false,
             "renderer": "flot",
             "seriesOverrides": [ ],
             "spaceLength": 10,
             "span": 6,
             "stack": false,
             "steppedLine": false,
             "targets": [
                {
                   "expr": "sum(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"(prometheus|api_prom)_api_v1_.+\",status_code=~\"2.+\"}[$__rate_interval])) /\nsum(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"(prometheus|api_prom)_api_v1_.+\"}[$__rate_interval]))\n",
                   "format": null,
                   "instant": false,
                   "interval": "",
                   "intervalFactor": null,
                   "legendFormat": "",
                   "legendLink": null,
                   "step": null
                }
             ],
             "thresholds": [ ],
             "timeFrom": null,
             "timeShift": null,
             "title": "Reads - 2xx",
             "tooltip": {
                "shared": false,
                "sort": 0,
                "value_type": "individual"
             },
             "type": "stat",
             "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": [ ]
             },
             "yaxes": [
                {
                   "format": "short",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": 0,
                   "show": true
                },
                {
                   "format": "short",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": null,
                   "show": false
                }
             ]
          },
          {
             "aliasColors": { },
             "bars": false,
             "dashLength": 10,
             "dashes": false,
             "datasource": "$datasource",
             "fieldConfig": {
                "defaults": {
                   "color": {
                      "mode": "thresholds"
                   },
                   "decimals": 1,
                   "noValue": "",
                   "thresholds": {
                      "mode": "absolute",
                      "steps": [
                         {
                            "color": "green",
                            "value": null
                         },
                         {
                            "color": "orange",
                            "value": 0.01
                         },
                         {
                            "color": "red",
                            "value": 0.050000000000000003
                         }
                      ]
                   },
                   "unit": "percentunit"
                },
                "overrides": [ ]
             },
             "fill": 1,
             "gridPos": {
                "h": 4,
                "w": 2,
                "x": 12,
                "y": 4
             },
             "id": 7,
             "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
             },
             "lines": true,
             "linewidth": 1,
             "links": [ ],
             "nullPointMode": "null as zero",
             "percentage": false,
             "pointradius": 5,
             "points": false,
             "renderer": "flot",
             "seriesOverrides": [ ],
             "spaceLength": 10,
             "span": 6,
             "stack": false,
             "steppedLine": false,
             "targets": [
                {
                   "expr": "sum(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"(prometheus|api_prom)_api_v1_.+\",status_code=~\"4.+\"}[$__rate_interval])) /\nsum(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"(prometheus|api_prom)_api_v1_.+\"}[$__rate_interval]))\n",
                   "format": null,
                   "instant": false,
                   "interval": "",
                   "intervalFactor": null,
                   "legendFormat": "",
                   "legendLink": null,
                   "step": null
                }
             ],
             "thresholds": [ ],
             "timeFrom": null,
             "timeShift": null,
             "title": "Reads - 4xx",
             "tooltip": {
                "shared": false,
                "sort": 0,
                "value_type": "individual"
             },
             "type": "stat",
             "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": [ ]
             },
             "yaxes": [
                {
                   "format": "short",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": 0,
                   "show": true
                },
                {
                   "format": "short",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": null,
                   "show": false
                }
             ]
          },
          {
             "aliasColors": { },
             "bars": false,
             "dashLength": 10,
             "dashes": false,
             "datasource": "$datasource",
             "fieldConfig": {
                "defaults": {
                   "color": {
                      "mode": "thresholds"
                   },
                   "decimals": 1,
                   "noValue": "",
                   "thresholds": {
                      "mode": "absolute",
                      "steps": [
                         {
                            "color": "green",
                            "value": null
                         },
                         {
                            "color": "red",
                            "value": 0.01
                         }
                      ]
                   },
                   "unit": "percentunit"
                },
                "overrides": [ ]
             },
             "fill": 1,
             "gridPos": {
                "h": 4,
                "w": 2,
                "x": 14,
                "y": 4
             },
             "id": 8,
             "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
             },
             "lines": true,
             "linewidth": 1,
             "links": [ ],
             "nullPointMode": "null as zero",
             "percentage": false,
             "pointradius": 5,
             "points": false,
             "renderer": "flot",
             "seriesOverrides": [ ],
             "spaceLength": 10,
             "span": 6,
             "stack": false,
             "steppedLine": false,
             "targets": [
                {
                   "expr": "sum(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"(prometheus|api_prom)_api_v1_.+\",status_code=~\"5.+\"}[$__rate_interval])) /\nsum(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"(prometheus|api_prom)_api_v1_.+\"}[$__rate_interval]))\n",
                   "format": null,
                   "instant": false,
                   "interval": "",
                   "intervalFactor": null,
                   "legendFormat": "",
                   "legendLink": null,
                   "step": null
                }
             ],
             "thresholds": [ ],
             "timeFrom": null,
             "timeShift": null,
             "title": "Reads - 5xx",
             "tooltip": {
                "shared": false,
                "sort": 0,
                "value_type": "individual"
             },
             "type": "stat",
             "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": [ ]
             },
             "yaxes": [
                {
                   "format": "short",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": 0,
                   "show": true
                },
                {
                   "format": "short",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": null,
                   "show": false
                }
             ]
          },
          {
             "aliasColors": { },
             "bars": false,
             "dashLength": 10,
             "dashes": false,
             "datasource": "$datasource",
             "fieldConfig": {
                "defaults": {
                   "color": {
                      "mode": "thresholds"
                   },
                   "decimals": 1,
                   "noValue": "",
                   "thresholds": {
                      "mode": "absolute",
                      "steps": [
                         {
                            "color": "green",
                            "value": null
                         },
                         {
                            "color": "orange",
                            "value": 1
                         },
                         {
                            "color": "red",
                            "value": 2.5
                         }
                      ]
                   },
                   "unit": "s"
                },
                "overrides": [ ]
             },
             "fill": 1,
             "gridPos": {
                "h": 4,
                "w": 8,
                "x": 16,
                "y": 4
             },
             "id": 9,
             "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
             },
             "lines": true,
             "linewidth": 1,
             "links": [ ],
             "nullPointMode": "null as zero",
             "percentage": false,
             "pointradius": 5,
             "points": false,
             "renderer": "flot",
             "seriesOverrides": [ ],
             "spaceLength": 10,
             "span": 6,
             "stack": false,
             "steppedLine": false,
             "targets": [
                {
                   "expr": "histogram_quantile(0.99, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"(prometheus|api_prom)_api_v1_.+\"}))\n",
                   "format": null,
                   "instant": false,
                   "interval": "",
                   "intervalFactor": null,
                   "legendFormat": "",
                   "legendLink": null,
                   "step": null
                }
             ],
             "thresholds": [ ],
             "timeFrom": null,
             "timeShift": null,
             "title": "Reads 99th Latency",
             "tooltip": {
                "shared": false,
                "sort": 0,
                "value_type": "individual"
             },
             "type": "stat",
             "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": [ ]
             },
             "yaxes": [
                {
                   "format": "short",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": 0,
                   "show": true
                },
                {
                   "format": "short",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": null,
                   "show": false
                }
             ]
          },
          {
             "aliasColors": { },
             "bars": false,
             "dashLength": 10,
             "dashes": false,
             "datasource": "$datasource",
             "fieldConfig": {
                "defaults": {
                   "color": {
                      "mode": "thresholds"
                   },
                   "decimals": 0,
                   "noValue": "All healthy",
                   "thresholds": {
                      "mode": "absolute",
                      "steps": [
                         {
                            "color": "green",
                            "value": null
                         },
                         {
                            "color": "orange",
                            "value": 1
                         },
                         {
                            "color": "red",
                            "value": 2
                         }
                      ]
                   },
                   "unit": "short"
                },
                "overrides": [ ]
             },
             "fill": 1,
             "gridPos": {
                "h": 8,
                "w": 10,
                "x": 0,
                "y": 8
             },
             "id": 10,
             "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
             },
             "lines": true,
             "linewidth": 1,
             "links": [ ],
             "nullPointMode": "null as zero",
             "options": {
                "text": {
                   "titleSize": 14,
                   "valueSize": 14
                }
             },
             "percentage": false,
             "pointradius": 5,
             "points": false,
             "renderer": "flot",
             "seriesOverrides": [ ],
             "spaceLength": 10,
             "span": 6,
             "stack": false,
             "steppedLine": false,
             "targets": [
                {
                   "expr": "kube_deployment_status_replicas_unavailable{cluster=~\"$cluster\", namespace=~\"$namespace\", deployment=~\"cortex-gw|distributor|ingester|query-frontend|querier|compactor|store-gateway|ruler|alertmanager\"}\n> 0\n",
                   "format": null,
                   "instant": true,
                   "interval": "",
                   "intervalFactor": null,
                   "legendFormat": "{{deployment}}",
                   "legendLink": null,
                   "step": null
                },
                {
                   "expr": "kube_statefulset_status_replicas_current{cluster=~\"$cluster\", namespace=~\"$namespace\", statefulset=~\"cortex-gw|distributor|ingester|query-frontend|querier|compactor|store-gateway|ruler|alertmanager\"} -\nkube_statefulset_status_replicas_ready {cluster=~\"$cluster\", namespace=~\"$namespace\", statefulset=~\"cortex-gw|distributor|ingester|query-frontend|querier|compactor|store-gateway|ruler|alertmanager\"}\n> 0\n",
                   "format": null,
                   "instant": true,
                   "interval": "",
                   "intervalFactor": null,
                   "legendFormat": "{{statefulset}}",
                   "legendLink": null,
                   "step": null
                }
             ],
             "thresholds": [ ],
             "timeFrom": null,
             "timeShift": null,
             "title": "Unhealthy pods",
             "tooltip": {
                "shared": false,
                "sort": 0,
                "value_type": "individual"
             },
             "type": "stat",
             "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": [ ]
             },
             "yaxes": [
                {
                   "format": "short",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": 0,
                   "show": true
                },
                {
                   "format": "short",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": null,
                   "show": false
                }
             ]
          },
          {
             "datasource": "$datasource",
             "fieldConfig": {
                "overrides": [
                   {
                      "matcher": {
                         "id": "byRegexp",
                         "options": "r.*"
                      },
                      "properties": [
                         {
                            "id": "custom.align",
                            "value": "center"
                         }
                      ]
                   }
                ]
             },
             "gridPos": {
                "h": 8,
                "w": 6,
                "x": 10,
                "y": 8
             },
             "id": 11,
             "targets": [
                {
                   "expr": "count by(container, version) (\n  label_replace(\n    kube_pod_container_info{cluster=~\"$cluster\", namespace=~\"$namespace\",container=~\"cortex-gw|distributor|ingester|query-frontend|querier|compactor|store-gateway|ruler|alertmanager\"},\n    \"version\", \"$1\", \"image\", \".*:(.+)-.*\"\n  )\n)\n",
                   "instant": true,
                   "legendFormat": "",
                   "refId": "A"
                }
             ],
             "title": "Pods count per Version",
             "transformations": [
                {
                   "id": "labelsToFields",
                   "options": {
                      "valueLabel": "version"
                   }
                },
                {
                   "id": "organize",
                   "options": {
                      "excludeByName": {
                         "Time": true
                      }
                   }
                },
                {
                   "id": "sortBy",
                   "options": {
                      "fields": { },
                      "sort": [
                         {
                            "field": "container"
                         }
                      ]
                   }
                }
             ],
             "type": "table"
          },
          {
             "aliasColors": { },
             "bars": false,
             "dashLength": 10,
             "dashes": false,
             "datasource": "$datasource",
             "fill": 1,
             "gridPos": {
                "h": 8,
                "w": 8,
                "x": 16,
                "y": 8
             },
             "id": 12,
             "legend": {
                "avg": false,
                "current": false,
                "max": false,
                "min": false,
                "show": true,
                "total": false,
                "values": false
             },
             "lines": true,
             "linewidth": 1,
             "links": [ ],
             "nullPointMode": "null as zero",
             "percentage": false,
             "pointradius": 5,
             "points": false,
             "renderer": "flot",
             "seriesOverrides": [ ],
             "spaceLength": 10,
             "span": 6,
             "stack": false,
             "steppedLine": false,
             "targets": [
                {
                   "expr": "1 - (\n  avg_over_time(histogram_quantile(0.99, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_(v1|prom)_push\"} offset 24h))[1h:])\n  /\n  avg_over_time(histogram_quantile(0.99, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_(v1|prom)_push\"}))[1h:])\n)\n",
                   "format": "time_series",
                   "interval": "1m",
                   "intervalFactor": 2,
                   "legendFormat": "writes",
                   "legendLink": null,
                   "step": 10
                },
                {
                   "expr": "1 - (\n  avg_over_time(histogram_quantile(0.99, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"(prometheus|api_prom)_api_v1_.+\"} offset 24h))[1h:])\n  /\n  avg_over_time(histogram_quantile(0.99, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"(prometheus|api_prom)_api_v1_.+\"}))[1h:])\n)\n",
                   "format": "time_series",
                   "interval": "1m",
                   "intervalFactor": 2,
                   "legendFormat": "reads",
                   "legendLink": null,
                   "step": 10
                }
             ],
             "thresholds": [ ],
             "timeFrom": null,
             "timeShift": null,
             "title": "Latency vs 24h ago",
             "tooltip": {
                "shared": false,
                "sort": 0,
                "value_type": "individual"
             },
             "type": "graph",
             "xaxis": {
                "buckets": null,
                "mode": "time",
                "name": null,
                "show": true,
                "values": [ ]
             },
             "yaxes": [
                {
                   "format": "percentunit",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": null,
                   "show": true
                },
                {
                   "format": "short",
                   "label": null,
                   "logBase": 1,
                   "max": null,
                   "min": null,
                   "show": false
                }
             ]
          }
       ],
       "refresh": "10s",
       "rows": null,
       "schemaVersion": 27,
       "style": "dark",
       "tags": [
          "cortex"
       ],
       "templating": {
          "list": [
             {
                "current": {
                   "text": "default",
                   "value": "default"
                },
                "hide": 0,
                "label": null,
                "name": "datasource",
                "options": [ ],
                "query": "prometheus",
                "refresh": 1,
                "regex": "",
                "type": "datasource"
             },
             {
                "allValue": null,
                "current": {
                   "text": "prod",
                   "value": "prod"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": false,
                "label": "cluster",
                "multi": false,
                "name": "cluster",
                "options": [ ],
                "query": "label_values(cortex_build_info, cluster)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             },
             {
                "allValue": null,
                "current": {
                   "text": "prod",
                   "value": "prod"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": false,
                "label": "namespace",
                "multi": false,
                "name": "namespace",
                "options": [ ],
                "query": "label_values(cortex_build_info{cluster=~\"$cluster\"}, namespace)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             }
          ]
       },
       "time": {
          "from": "now-1h",
          "to": "now"
       },
       "timepicker": {
          "refresh_intervals": [
             "5s",
             "10s",
             "30s",
             "1m",
             "5m",
             "15m",
             "30m",
             "1h",
             "2h",
             "1d"
          ],
          "time_options": [
             "5m",
             "15m",
             "1h",
             "6h",
             "12h",
             "24h",
             "2d",
             "7d",
             "30d"
          ]
       },
       "timezone": "utc",
       "title": "Cortex / Rollout progress",
       "uid": "7544a3a62b1be6ffd919fc990ab8ba8f",
       "version": 0
    }
kind: ConfigMap
metadata:
  labels:
    grafana_dashboard: "1"
  name: cortex-rollout-progress.json
  namespace: cortex-monitoring-system
---
apiVersion: v1
data:
  cortex-scaling.json: |
    {
       "annotations": {
          "list": [ ]
       },
       "editable": true,
       "gnetId": null,
       "graphTooltip": 0,
       "hideControls": false,
       "links": [
          {
             "asDropdown": true,
             "icon": "external link",
             "includeVars": true,
             "keepTime": true,
             "tags": [
                "cortex"
             ],
             "targetBlank": false,
             "title": "Cortex Dashboards",
             "type": "dashboards"
          }
       ],
       "refresh": "10s",
       "rows": [
          {
             "collapse": false,
             "height": "200px",
             "panels": [
                {
                   "id": 1,
                   "options": {
                      "content": "This dashboards shows any services which are not scaled correctly.\nThe table below gives the required number of replicas and the reason why.\nWe only show services without enough replicas.\n\nReasons:\n- **sample_rate**: There are not enough replicas to handle the\n  sample rate.  Applies to distributor and ingesters.\n- **active_series**: There are not enough replicas\n  to handle the number of active series.  Applies to ingesters.\n- **cpu_usage**: There are not enough replicas\n  based on the CPU usage of the jobs vs the resource requests.\n  Applies to all jobs.\n- **memory_usage**: There are not enough replicas based on the memory\n  usage vs the resource requests.  Applies to all jobs.\n- **active_series_limits**: There are not enough replicas to hold 60% of the\n  sum of all the per tenant series limits.\n- **sample_rate_limits**: There are not enough replicas to handle 60% of the\n  sum of all the per tenant rate limits.\n",
                      "mode": "markdown"
                   },
                   "span": 12,
                   "title": "",
                   "type": "text"
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Cortex Service Scaling",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "400px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 2,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "sort": {
                      "col": 0,
                      "desc": false
                   },
                   "spaceLength": 10,
                   "span": 12,
                   "stack": false,
                   "steppedLine": false,
                   "styles": [
                      {
                         "alias": "Time",
                         "dateFormat": "YYYY-MM-DD HH:mm:ss",
                         "pattern": "Time",
                         "type": "hidden"
                      },
                      {
                         "alias": "Required Replicas",
                         "colorMode": null,
                         "colors": [ ],
                         "dateFormat": "YYYY-MM-DD HH:mm:ss",
                         "decimals": 0,
                         "link": false,
                         "linkTargetBlank": false,
                         "linkTooltip": "Drill down",
                         "linkUrl": "",
                         "pattern": "Value",
                         "thresholds": [ ],
                         "type": "number",
                         "unit": "short"
                      },
                      {
                         "alias": "Cluster",
                         "colorMode": null,
                         "colors": [ ],
                         "dateFormat": "YYYY-MM-DD HH:mm:ss",
                         "decimals": 2,
                         "link": false,
                         "linkTargetBlank": false,
                         "linkTooltip": "Drill down",
                         "linkUrl": "",
                         "pattern": "__name__",
                         "thresholds": [ ],
                         "type": "hidden",
                         "unit": "short"
                      },
                      {
                         "alias": "Cluster",
                         "colorMode": null,
                         "colors": [ ],
                         "dateFormat": "YYYY-MM-DD HH:mm:ss",
                         "decimals": 2,
                         "link": false,
                         "linkTargetBlank": false,
                         "linkTooltip": "Drill down",
                         "linkUrl": "",
                         "pattern": "cluster",
                         "thresholds": [ ],
                         "type": "number",
                         "unit": "short"
                      },
                      {
                         "alias": "Service",
                         "colorMode": null,
                         "colors": [ ],
                         "dateFormat": "YYYY-MM-DD HH:mm:ss",
                         "decimals": 2,
                         "link": false,
                         "linkTargetBlank": false,
                         "linkTooltip": "Drill down",
                         "linkUrl": "",
                         "pattern": "deployment",
                         "thresholds": [ ],
                         "type": "number",
                         "unit": "short"
                      },
                      {
                         "alias": "Namespace",
                         "colorMode": null,
                         "colors": [ ],
                         "dateFormat": "YYYY-MM-DD HH:mm:ss",
                         "decimals": 2,
                         "link": false,
                         "linkTargetBlank": false,
                         "linkTooltip": "Drill down",
                         "linkUrl": "",
                         "pattern": "namespace",
                         "thresholds": [ ],
                         "type": "number",
                         "unit": "short"
                      },
                      {
                         "alias": "Reason",
                         "colorMode": null,
                         "colors": [ ],
                         "dateFormat": "YYYY-MM-DD HH:mm:ss",
                         "decimals": 2,
                         "link": false,
                         "linkTargetBlank": false,
                         "linkTooltip": "Drill down",
                         "linkUrl": "",
                         "pattern": "reason",
                         "thresholds": [ ],
                         "type": "number",
                         "unit": "short"
                      },
                      {
                         "alias": "",
                         "colorMode": null,
                         "colors": [ ],
                         "dateFormat": "YYYY-MM-DD HH:mm:ss",
                         "decimals": 2,
                         "pattern": "/.*/",
                         "thresholds": [ ],
                         "type": "string",
                         "unit": "short"
                      }
                   ],
                   "targets": [
                      {
                         "expr": "sort_desc(\n  cluster_namespace_deployment_reason:required_replicas:count{cluster=~\"$cluster\", namespace=~\"$namespace\"}\n    > ignoring(reason) group_left\n  cluster_namespace_deployment:actual_replicas:count{cluster=~\"$cluster\", namespace=~\"$namespace\"}\n)\n",
                         "format": "table",
                         "instant": true,
                         "intervalFactor": 2,
                         "legendFormat": "",
                         "refId": "A",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Workload-based scaling",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "transform": "table",
                   "type": "table",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Scaling",
             "titleSize": "h6"
          }
       ],
       "schemaVersion": 14,
       "style": "dark",
       "tags": [
          "cortex"
       ],
       "templating": {
          "list": [
             {
                "current": {
                   "text": "default",
                   "value": "default"
                },
                "hide": 0,
                "label": null,
                "name": "datasource",
                "options": [ ],
                "query": "prometheus",
                "refresh": 1,
                "regex": "",
                "type": "datasource"
             },
             {
                "allValue": ".+",
                "current": {
                   "selected": true,
                   "text": "All",
                   "value": "$__all"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": true,
                "label": "cluster",
                "multi": true,
                "name": "cluster",
                "options": [ ],
                "query": "label_values(cortex_build_info, cluster)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             },
             {
                "allValue": ".+",
                "current": {
                   "selected": true,
                   "text": "All",
                   "value": "$__all"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": true,
                "label": "namespace",
                "multi": true,
                "name": "namespace",
                "options": [ ],
                "query": "label_values(cortex_build_info{cluster=~\"$cluster\"}, namespace)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             }
          ]
       },
       "time": {
          "from": "now-1h",
          "to": "now"
       },
       "timepicker": {
          "refresh_intervals": [
             "5s",
             "10s",
             "30s",
             "1m",
             "5m",
             "15m",
             "30m",
             "1h",
             "2h",
             "1d"
          ],
          "time_options": [
             "5m",
             "15m",
             "1h",
             "6h",
             "12h",
             "24h",
             "2d",
             "7d",
             "30d"
          ]
       },
       "timezone": "utc",
       "title": "Cortex / Scaling",
       "uid": "88c041017b96856c9176e07cf557bdcf",
       "version": 0
    }
kind: ConfigMap
metadata:
  labels:
    grafana_dashboard: "1"
  name: cortex-scaling.json
  namespace: cortex-monitoring-system
---
apiVersion: v1
data:
  cortex-writes.json: |
    {
       "annotations": {
          "list": [ ]
       },
       "editable": true,
       "gnetId": null,
       "graphTooltip": 0,
       "hideControls": false,
       "links": [
          {
             "asDropdown": true,
             "icon": "external link",
             "includeVars": true,
             "keepTime": true,
             "tags": [
                "cortex"
             ],
             "targetBlank": false,
             "title": "Cortex Dashboards",
             "type": "dashboards"
          }
       ],
       "refresh": "10s",
       "rows": [
          {
             "collapse": false,
             "height": "100px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "format": "reqps",
                   "id": 1,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(cluster_namespace_job:cortex_distributor_received_samples:rate5m{cluster=~\"$cluster\", job=~\"($namespace)/(distributor|cortex$)\"})",
                         "format": "time_series",
                         "instant": true,
                         "intervalFactor": 2,
                         "refId": "A"
                      }
                   ],
                   "thresholds": "70,80",
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Samples / s",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "singlestat",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "format": "short",
                   "id": 2,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(cortex_ingester_memory_series{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}\n/ on(cluster, namespace) group_left\nmax by (cluster, namespace) (cortex_distributor_replication_factor{cluster=~\"$cluster\", job=~\"($namespace)/(distributor|cortex$)\"}))\n",
                         "format": "time_series",
                         "instant": true,
                         "intervalFactor": 2,
                         "refId": "A"
                      }
                   ],
                   "thresholds": "70,80",
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Active Series",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "singlestat",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "format": "short",
                   "id": 3,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "count(count by(user) (cortex_ingester_active_series{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}))",
                         "format": "time_series",
                         "instant": true,
                         "intervalFactor": 2,
                         "refId": "A"
                      }
                   ],
                   "thresholds": "70,80",
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Tenants",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "singlestat",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "format": "reqps",
                   "id": 4,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_(v1|prom)_push\"}[5m]))",
                         "format": "time_series",
                         "instant": true,
                         "intervalFactor": 2,
                         "refId": "A"
                      }
                   ],
                   "thresholds": "70,80",
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "singlestat",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": false,
             "title": "Headlines",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": {
                      "1xx": "#EAB839",
                      "2xx": "#7EB26D",
                      "3xx": "#6ED0E0",
                      "4xx": "#EF843C",
                      "5xx": "#E24D42",
                      "error": "#E24D42",
                      "success": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 5,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by (status) (\n  label_replace(label_replace(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_(v1|prom)_push\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-z]+)\"))\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{status}}",
                         "refId": "A",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 6,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_(v1|prom)_push\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_(v1|prom)_push\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "1e3 * sum(cluster_job_route:cortex_request_duration_seconds_sum:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_(v1|prom)_push\"}) / sum(cluster_job_route:cortex_request_duration_seconds_count:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_(v1|prom)_push\"})",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 0,
                   "id": 7,
                   "legend": {
                      "show": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by(le, pod) (rate(cortex_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_(v1|prom)_push\"}[$__rate_interval])))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Per pod p99 Latency",
                   "tooltip": {
                      "sort": 2
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "s",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Gateway",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": {
                      "1xx": "#EAB839",
                      "2xx": "#7EB26D",
                      "3xx": "#6ED0E0",
                      "4xx": "#EF843C",
                      "5xx": "#E24D42",
                      "error": "#E24D42",
                      "success": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 8,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by (status) (\n  label_replace(label_replace(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(distributor|cortex$)\", route=~\"/distributor.Distributor/Push|/httpgrpc.*|api_(v1|prom)_push\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-z]+)\"))\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{status}}",
                         "refId": "A",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 9,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(distributor|cortex$)\", route=~\"/distributor.Distributor/Push|/httpgrpc.*|api_(v1|prom)_push\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(distributor|cortex$)\", route=~\"/distributor.Distributor/Push|/httpgrpc.*|api_(v1|prom)_push\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "1e3 * sum(cluster_job_route:cortex_request_duration_seconds_sum:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(distributor|cortex$)\", route=~\"/distributor.Distributor/Push|/httpgrpc.*|api_(v1|prom)_push\"}) / sum(cluster_job_route:cortex_request_duration_seconds_count:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(distributor|cortex$)\", route=~\"/distributor.Distributor/Push|/httpgrpc.*|api_(v1|prom)_push\"})",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 0,
                   "id": 10,
                   "legend": {
                      "show": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by(le, pod) (rate(cortex_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(distributor|cortex$)\", route=~\"/distributor.Distributor/Push|/httpgrpc.*|api_(v1|prom)_push\"}[$__rate_interval])))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Per pod p99 Latency",
                   "tooltip": {
                      "sort": 2
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "s",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Distributor",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": {
                      "1xx": "#EAB839",
                      "2xx": "#7EB26D",
                      "3xx": "#6ED0E0",
                      "4xx": "#EF843C",
                      "5xx": "#E24D42",
                      "error": "#E24D42",
                      "success": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 11,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by (status) (\n  label_replace(label_replace(rate(cortex_kv_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(distributor|cortex$)\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-z]+)\"))\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{status}}",
                         "refId": "A",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 12,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by (le) (cluster_job:cortex_kv_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(distributor|cortex$)\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum by (le) (cluster_job:cortex_kv_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(distributor|cortex$)\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "1e3 * sum(cluster_job:cortex_kv_request_duration_seconds_sum:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(distributor|cortex$)\"}) / sum(cluster_job:cortex_kv_request_duration_seconds_count:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(distributor|cortex$)\"})",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "KV Store (HA Dedupe)",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": {
                      "1xx": "#EAB839",
                      "2xx": "#7EB26D",
                      "3xx": "#6ED0E0",
                      "4xx": "#EF843C",
                      "5xx": "#E24D42",
                      "error": "#E24D42",
                      "success": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 13,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by (status) (\n  label_replace(label_replace(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\",route=\"/cortex.Ingester/Push\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-z]+)\"))\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{status}}",
                         "refId": "A",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 14,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\", route=\"/cortex.Ingester/Push\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\", route=\"/cortex.Ingester/Push\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "1e3 * sum(cluster_job_route:cortex_request_duration_seconds_sum:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\", route=\"/cortex.Ingester/Push\"}) / sum(cluster_job_route:cortex_request_duration_seconds_count:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\", route=\"/cortex.Ingester/Push\"})",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 0,
                   "id": 15,
                   "legend": {
                      "show": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by(le, pod) (rate(cortex_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\", route=\"/cortex.Ingester/Push\"}[$__rate_interval])))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Per pod p99 Latency",
                   "tooltip": {
                      "sort": 2
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "s",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Ingester",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": {
                      "1xx": "#EAB839",
                      "2xx": "#7EB26D",
                      "3xx": "#6ED0E0",
                      "4xx": "#EF843C",
                      "5xx": "#E24D42",
                      "error": "#E24D42",
                      "success": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 16,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by (status) (\n  label_replace(label_replace(rate(cortex_kv_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-z]+)\"))\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{status}}",
                         "refId": "A",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 17,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by (le) (cluster_job:cortex_kv_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum by (le) (cluster_job:cortex_kv_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "1e3 * sum(cluster_job:cortex_kv_request_duration_seconds_sum:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}) / sum(cluster_job:cortex_kv_request_duration_seconds_count:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"})",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "KV Store (Ring)",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": {
                      "failed": "#E24D42",
                      "successful": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 18,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_ingester_shipper_uploads_total{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}[$__rate_interval])) - sum(rate(cortex_ingester_shipper_upload_failures_total{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "successful",
                         "legendLink": null,
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_ingester_shipper_upload_failures_total{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "failed",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Uploaded blocks / sec",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 19,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\",component=\"ingester\",operation=\"upload\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(thanos_objstore_bucket_operation_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\",component=\"ingester\",operation=\"upload\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(thanos_objstore_bucket_operation_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\",component=\"ingester\",operation=\"upload\"}[$__rate_interval])) * 1e3 / sum(rate(thanos_objstore_bucket_operation_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\",component=\"ingester\",operation=\"upload\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Upload latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Ingester - Blocks storage - Shipper",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": {
                      "failed": "#E24D42",
                      "successful": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 20,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_ingester_tsdb_compactions_total{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "successful",
                         "legendLink": null,
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_ingester_tsdb_compactions_failed_total{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "failed",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Compactions / sec",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 21,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(cortex_ingester_tsdb_compaction_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(cortex_ingester_tsdb_compaction_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_ingester_tsdb_compaction_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}[$__rate_interval])) * 1e3 / sum(rate(cortex_ingester_tsdb_compaction_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Compactions latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Ingester - Blocks storage - TSDB Head",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": {
                      "failed": "#E24D42",
                      "successful": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 22,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_ingester_tsdb_wal_truncations_total{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}[$__rate_interval])) - sum(rate(cortex_ingester_tsdb_wal_truncations_failed_total{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "successful",
                         "legendLink": null,
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_ingester_tsdb_wal_truncations_failed_total{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "failed",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "WAL truncations / sec",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": {
                      "failed": "#E24D42",
                      "successful": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 23,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_ingester_tsdb_checkpoint_creations_total{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}[$__rate_interval])) - sum(rate(cortex_ingester_tsdb_checkpoint_creations_failed_total{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "successful",
                         "legendLink": null,
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_ingester_tsdb_checkpoint_creations_failed_total{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "failed",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Checkpoints created / sec",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 24,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_ingester_tsdb_wal_truncate_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}[$__rate_interval])) / sum(rate(cortex_ingester_tsdb_wal_truncate_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "avg",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "WAL truncations latency (includes checkpointing)",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "s",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": {
                      "WAL": "#E24D42",
                      "mmap-ed chunks": "#E28A42"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 25,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_ingester_wal_corruptions_total{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "WAL",
                         "legendLink": null,
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_ingester_tsdb_mmap_chunk_corruptions_total{cluster=~\"$cluster\", job=~\"($namespace)/(ingester.*|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "mmap-ed chunks",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Corruptions / sec",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ops",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Ingester - Blocks storage - TSDB WAL",
             "titleSize": "h6"
          }
       ],
       "schemaVersion": 14,
       "style": "dark",
       "tags": [
          "cortex"
       ],
       "templating": {
          "list": [
             {
                "current": {
                   "text": "default",
                   "value": "default"
                },
                "hide": 0,
                "label": null,
                "name": "datasource",
                "options": [ ],
                "query": "prometheus",
                "refresh": 1,
                "regex": "",
                "type": "datasource"
             },
             {
                "allValue": ".+",
                "current": {
                   "selected": true,
                   "text": "All",
                   "value": "$__all"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": true,
                "label": "cluster",
                "multi": true,
                "name": "cluster",
                "options": [ ],
                "query": "label_values(cortex_build_info, cluster)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             },
             {
                "allValue": ".+",
                "current": {
                   "selected": true,
                   "text": "All",
                   "value": "$__all"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": true,
                "label": "namespace",
                "multi": true,
                "name": "namespace",
                "options": [ ],
                "query": "label_values(cortex_build_info{cluster=~\"$cluster\"}, namespace)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             }
          ]
       },
       "time": {
          "from": "now-1h",
          "to": "now"
       },
       "timepicker": {
          "refresh_intervals": [
             "5s",
             "10s",
             "30s",
             "1m",
             "5m",
             "15m",
             "30m",
             "1h",
             "2h",
             "1d"
          ],
          "time_options": [
             "5m",
             "15m",
             "1h",
             "6h",
             "12h",
             "24h",
             "2d",
             "7d",
             "30d"
          ]
       },
       "timezone": "utc",
       "title": "Cortex / Writes",
       "uid": "0156f6d15aa234d452a33a4f13c838e3",
       "version": 0
    }
kind: ConfigMap
metadata:
  labels:
    grafana_dashboard: "1"
  name: cortex-writes.json
  namespace: cortex-monitoring-system
---
apiVersion: v1
data:
  ruler.json: |
    {
       "annotations": {
          "list": [ ]
       },
       "editable": true,
       "gnetId": null,
       "graphTooltip": 0,
       "hideControls": false,
       "links": [
          {
             "asDropdown": true,
             "icon": "external link",
             "includeVars": true,
             "keepTime": true,
             "tags": [
                "cortex"
             ],
             "targetBlank": false,
             "title": "Cortex Dashboards",
             "type": "dashboards"
          }
       ],
       "refresh": "10s",
       "rows": [
          {
             "collapse": false,
             "height": "100px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "format": "short",
                   "id": 1,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(cortex_ruler_managers_total{cluster=~\"$cluster\", job=~\"($namespace)/ruler\"})",
                         "format": "time_series",
                         "instant": true,
                         "intervalFactor": 2,
                         "refId": "A"
                      }
                   ],
                   "thresholds": "70,80",
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Active Configurations",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "singlestat",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "format": "short",
                   "id": 2,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(cortex_prometheus_rule_group_rules{cluster=~\"$cluster\", job=~\"($namespace)/ruler\"})",
                         "format": "time_series",
                         "instant": true,
                         "intervalFactor": 2,
                         "refId": "A"
                      }
                   ],
                   "thresholds": "70,80",
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Total Rules",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "singlestat",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "format": "reqps",
                   "id": 3,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_ingester_client_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/ruler\", operation=\"/cortex.Ingester/QueryStream\"}[5m]))",
                         "format": "time_series",
                         "instant": true,
                         "intervalFactor": 2,
                         "refId": "A"
                      }
                   ],
                   "thresholds": "70,80",
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Read from Ingesters - QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "singlestat",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "format": "reqps",
                   "id": 4,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 3,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_ingester_client_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/ruler\", operation=\"/cortex.Ingester/Push\"}[5m]))",
                         "format": "time_series",
                         "instant": true,
                         "intervalFactor": 2,
                         "refId": "A"
                      }
                   ],
                   "thresholds": "70,80",
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Write to Ingesters - QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "singlestat",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": false,
             "title": "Headlines",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 5,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_prometheus_rule_evaluations_total{cluster=~\"$cluster\", job=~\"($namespace)/ruler\"}[$__rate_interval]))\n-\nsum(rate(cortex_prometheus_rule_evaluation_failures_total{cluster=~\"$cluster\", job=~\"($namespace)/ruler\"}[$__rate_interval]))\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "success",
                         "legendLink": null,
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_prometheus_rule_evaluation_failures_total{cluster=~\"$cluster\", job=~\"($namespace)/ruler\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "failed",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "EPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 6,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum (rate(cortex_prometheus_rule_evaluation_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/ruler\"}[$__rate_interval]))\n  /\nsum (rate(cortex_prometheus_rule_evaluation_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/ruler\"}[$__rate_interval]))\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "average",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Rule Evaluations Global",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": {
                      "1xx": "#EAB839",
                      "2xx": "#7EB26D",
                      "3xx": "#6ED0E0",
                      "4xx": "#EF843C",
                      "5xx": "#E24D42",
                      "error": "#E24D42",
                      "success": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 7,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by (status) (\n  label_replace(label_replace(rate(cortex_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_prom_rules.*|api_prom_api_v1_(rules|alerts)\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-z]+)\"))\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{status}}",
                         "refId": "A",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 8,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_prom_rules.*|api_prom_api_v1_(rules|alerts)\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum by (le) (cluster_job_route:cortex_request_duration_seconds_bucket:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_prom_rules.*|api_prom_api_v1_(rules|alerts)\"})) * 1e3",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "1e3 * sum(cluster_job_route:cortex_request_duration_seconds_sum:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_prom_rules.*|api_prom_api_v1_(rules|alerts)\"}) / sum(cluster_job_route:cortex_request_duration_seconds_count:sum_rate{cluster=~\"$cluster\", job=~\"($namespace)/(gateway|cortex-gw)\", route=~\"api_prom_rules.*|api_prom_api_v1_(rules|alerts)\"})",
                         "format": "time_series",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Configuration API (gateway)",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": {
                      "1xx": "#EAB839",
                      "2xx": "#7EB26D",
                      "3xx": "#6ED0E0",
                      "4xx": "#EF843C",
                      "5xx": "#E24D42",
                      "error": "#E24D42",
                      "success": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 9,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by (status) (\n  label_replace(label_replace(rate(cortex_ingester_client_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/ruler\", operation=\"/cortex.Ingester/Push\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-z]+)\"))\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{status}}",
                         "refId": "A",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 10,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(cortex_ingester_client_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/ruler\", operation=\"/cortex.Ingester/Push\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(cortex_ingester_client_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/ruler\", operation=\"/cortex.Ingester/Push\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_ingester_client_request_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/ruler\", operation=\"/cortex.Ingester/Push\"}[$__rate_interval])) * 1e3 / sum(rate(cortex_ingester_client_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/ruler\", operation=\"/cortex.Ingester/Push\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Writes (Ingesters)",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": {
                      "1xx": "#EAB839",
                      "2xx": "#7EB26D",
                      "3xx": "#6ED0E0",
                      "4xx": "#EF843C",
                      "5xx": "#E24D42",
                      "error": "#E24D42",
                      "success": "#7EB26D"
                   },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 10,
                   "id": 11,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 0,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": true,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by (status) (\n  label_replace(label_replace(rate(cortex_ingester_client_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/ruler\", operation=\"/cortex.Ingester/QueryStream\"}[$__rate_interval]),\n  \"status\", \"${1}xx\", \"status_code\", \"([0-9])..\"),\n  \"status\", \"${1}\", \"status_code\", \"([a-z]+)\"))\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{status}}",
                         "refId": "A",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "QPS",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 12,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 6,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(cortex_ingester_client_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/ruler\", operation=\"/cortex.Ingester/QueryStream\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(cortex_ingester_client_request_duration_seconds_bucket{cluster=~\"$cluster\", job=~\"($namespace)/ruler\", operation=\"/cortex.Ingester/QueryStream\"}[$__rate_interval])) by (le)) * 1e3",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_ingester_client_request_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/ruler\", operation=\"/cortex.Ingester/QueryStream\"}[$__rate_interval])) * 1e3 / sum(rate(cortex_ingester_client_request_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/ruler\", operation=\"/cortex.Ingester/QueryStream\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "ms",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Reads (Ingesters)",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 13,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(cortex_querier_storegateway_instances_hit_per_query_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(ruler|cortex$)\"}[$__rate_interval])) by (le)) * 1",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(cortex_querier_storegateway_instances_hit_per_query_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(ruler|cortex$)\"}[$__rate_interval])) by (le)) * 1",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_querier_storegateway_instances_hit_per_query_sum{cluster=~\"$cluster\", job=~\"($namespace)/(ruler|cortex$)\"}[$__rate_interval])) * 1 / sum(rate(cortex_querier_storegateway_instances_hit_per_query_count{cluster=~\"$cluster\", job=~\"($namespace)/(ruler|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Number of store-gateways hit per Query",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 14,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "histogram_quantile(0.99, sum(rate(cortex_querier_storegateway_refetches_per_query_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(ruler|cortex$)\"}[$__rate_interval])) by (le)) * 1",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "99th Percentile",
                         "refId": "A",
                         "step": 10
                      },
                      {
                         "expr": "histogram_quantile(0.50, sum(rate(cortex_querier_storegateway_refetches_per_query_bucket{cluster=~\"$cluster\", job=~\"($namespace)/(ruler|cortex$)\"}[$__rate_interval])) by (le)) * 1",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "50th Percentile",
                         "refId": "B",
                         "step": 10
                      },
                      {
                         "expr": "sum(rate(cortex_querier_storegateway_refetches_per_query_sum{cluster=~\"$cluster\", job=~\"($namespace)/(ruler|cortex$)\"}[$__rate_interval])) * 1 / sum(rate(cortex_querier_storegateway_refetches_per_query_count{cluster=~\"$cluster\", job=~\"($namespace)/(ruler|cortex$)\"}[$__rate_interval]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Average",
                         "refId": "C",
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Refetches of missing blocks per Query",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 15,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum(rate(cortex_querier_blocks_consistency_checks_failed_total{cluster=~\"$cluster\", job=~\"($namespace)/(ruler|cortex$)\"}[1m])) / sum(rate(cortex_querier_blocks_consistency_checks_total{cluster=~\"$cluster\", job=~\"($namespace)/(ruler|cortex$)\"}[1m]))",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "Failure Rate",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Consistency checks failed",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "percentunit",
                         "label": null,
                         "logBase": 1,
                         "max": 1,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Ruler - Blocks storage",
             "titleSize": "h6"
          },
          {
             "collapse": false,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 16,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(user) (rate(cortex_prometheus_notifications_errors_total{cluster=~\"$cluster\", job=~\"($namespace)/ruler\"}[$__rate_interval]))\n  /\nsum by(user) (rate(cortex_prometheus_notifications_sent_total{cluster=~\"$cluster\", job=~\"($namespace)/ruler\"}[$__rate_interval]))\n> 0\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{ user }}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Delivery Errors",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 17,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(user) (rate(cortex_prometheus_notifications_queue_length{cluster=~\"$cluster\", job=~\"($namespace)/ruler\"}[$__rate_interval]))\n  /\nsum by(user) (rate(cortex_prometheus_notifications_queue_capacity{cluster=~\"$cluster\", job=~\"($namespace)/ruler\"}[$__rate_interval])) > 0\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{ user }}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Queue Length",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 18,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by (user) (increase(cortex_prometheus_notifications_dropped_total{cluster=~\"$cluster\", job=~\"($namespace)/ruler\"}[$__rate_interval])) > 0\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{ user }}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Dropped",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Notifications",
             "titleSize": "h6"
          },
          {
             "collapse": true,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 19,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(user) (rate(cortex_prometheus_rule_group_iterations_missed_total{cluster=~\"$cluster\", job=~\"($namespace)/ruler\"}[$__rate_interval])) > 0",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{ user }}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Missed Iterations",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 20,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "rate(cortex_prometheus_rule_group_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/ruler\"}[$__rate_interval])\n  /\nrate(cortex_prometheus_rule_group_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/ruler\"}[$__rate_interval])\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{ user }}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                },
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 21,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 4,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(rule_group) (rate(cortex_prometheus_rule_evaluation_failures_total{cluster=~\"$cluster\", job=~\"($namespace)/ruler\"}[$__rate_interval])) > 0",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{ rule_group }}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Failures",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Group Evaluations",
             "titleSize": "h6"
          },
          {
             "collapse": true,
             "height": "250px",
             "panels": [
                {
                   "aliasColors": { },
                   "bars": false,
                   "dashLength": 10,
                   "dashes": false,
                   "datasource": "$datasource",
                   "fill": 1,
                   "id": 22,
                   "legend": {
                      "avg": false,
                      "current": false,
                      "max": false,
                      "min": false,
                      "show": true,
                      "total": false,
                      "values": false
                   },
                   "lines": true,
                   "linewidth": 1,
                   "links": [ ],
                   "nullPointMode": "null as zero",
                   "percentage": false,
                   "pointradius": 5,
                   "points": false,
                   "renderer": "flot",
                   "seriesOverrides": [ ],
                   "spaceLength": 10,
                   "span": 12,
                   "stack": false,
                   "steppedLine": false,
                   "targets": [
                      {
                         "expr": "sum by(user) (rate(cortex_prometheus_rule_evaluation_duration_seconds_sum{cluster=~\"$cluster\", job=~\"($namespace)/ruler\"}[$__rate_interval]))\n  /\nsum by(user) (rate(cortex_prometheus_rule_evaluation_duration_seconds_count{cluster=~\"$cluster\", job=~\"($namespace)/ruler\"}[$__rate_interval]))\n",
                         "format": "time_series",
                         "interval": "1m",
                         "intervalFactor": 2,
                         "legendFormat": "{{ user }}",
                         "legendLink": null,
                         "step": 10
                      }
                   ],
                   "thresholds": [ ],
                   "timeFrom": null,
                   "timeShift": null,
                   "title": "Latency",
                   "tooltip": {
                      "shared": false,
                      "sort": 0,
                      "value_type": "individual"
                   },
                   "type": "graph",
                   "xaxis": {
                      "buckets": null,
                      "mode": "time",
                      "name": null,
                      "show": true,
                      "values": [ ]
                   },
                   "yaxes": [
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": 0,
                         "show": true
                      },
                      {
                         "format": "short",
                         "label": null,
                         "logBase": 1,
                         "max": null,
                         "min": null,
                         "show": false
                      }
                   ]
                }
             ],
             "repeat": null,
             "repeatIteration": null,
             "repeatRowId": null,
             "showTitle": true,
             "title": "Rule Evaluation per User",
             "titleSize": "h6"
          }
       ],
       "schemaVersion": 14,
       "style": "dark",
       "tags": [
          "cortex"
       ],
       "templating": {
          "list": [
             {
                "current": {
                   "text": "default",
                   "value": "default"
                },
                "hide": 0,
                "label": null,
                "name": "datasource",
                "options": [ ],
                "query": "prometheus",
                "refresh": 1,
                "regex": "",
                "type": "datasource"
             },
             {
                "allValue": ".+",
                "current": {
                   "selected": true,
                   "text": "All",
                   "value": "$__all"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": true,
                "label": "cluster",
                "multi": true,
                "name": "cluster",
                "options": [ ],
                "query": "label_values(cortex_build_info, cluster)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             },
             {
                "allValue": ".+",
                "current": {
                   "selected": true,
                   "text": "All",
                   "value": "$__all"
                },
                "datasource": "$datasource",
                "hide": 0,
                "includeAll": true,
                "label": "namespace",
                "multi": true,
                "name": "namespace",
                "options": [ ],
                "query": "label_values(cortex_build_info{cluster=~\"$cluster\"}, namespace)",
                "refresh": 1,
                "regex": "",
                "sort": 2,
                "tagValuesQuery": "",
                "tags": [ ],
                "tagsQuery": "",
                "type": "query",
                "useTags": false
             }
          ]
       },
       "time": {
          "from": "now-1h",
          "to": "now"
       },
       "timepicker": {
          "refresh_intervals": [
             "5s",
             "10s",
             "30s",
             "1m",
             "5m",
             "15m",
             "30m",
             "1h",
             "2h",
             "1d"
          ],
          "time_options": [
             "5m",
             "15m",
             "1h",
             "6h",
             "12h",
             "24h",
             "2d",
             "7d",
             "30d"
          ]
       },
       "timezone": "utc",
       "title": "Cortex / Ruler",
       "uid": "44d12bcb1f95661c6ab6bc946dfc3473",
       "version": 0
    }
kind: ConfigMap
metadata:
  labels:
    grafana_dashboard: "1"
  name: ruler.json
  namespace: cortex-monitoring-system
